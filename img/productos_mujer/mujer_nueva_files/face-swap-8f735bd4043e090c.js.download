!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ff15e989-0465-431d-8ced-b966dda4fc74",e._sentryDebugIdIdentifier="sentry-dbid-ff15e989-0465-431d-8ced-b966dda4fc74")}catch(e){}}();var _sentryModuleMetadataGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_sentryModuleMetadataGlobal._sentryModuleMetadata=_sentryModuleMetadataGlobal._sentryModuleMetadata||{},_sentryModuleMetadataGlobal._sentryModuleMetadata[new _sentryModuleMetadataGlobal.Error().stack]=Object.assign({},_sentryModuleMetadataGlobal._sentryModuleMetadata[new _sentryModuleMetadataGlobal.Error().stack],{"_sentryBundlerPluginAppKey:pica":!0}),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6117],{22465:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/face-swap",function(){return t(1981)}])},13801:function(e,n){"use strict";n.Z={src:"https://static.pica-ai.com/_next/static/media/introduce-1.2349ac40.png",height:960,width:960,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAdVBMVEX9+/5gZmjM1LzKzsrB0NqMnal2aXNzeIOemI/Cxr6hnpvj49iXZ0aepKlkPi5HPzunpZ1oYWpzdHhuQy69s6hiX1xvW0/X2NCvraqOWT7KurPWx8F7SCSjtcGNkpo1M0CIjnlVSD60o4+EW0fw+fE0Gg9/Z1ccA/xRAAAADXRSTlP+/vr++v7+/v79/v7+2+2IhgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEdJREFUeJwFwQUCgCAABLAzEZVuxI7/P9ENyBnSRoqllCBufmBJ8ySSGQDaPM7bgOg/V5GNYXy50L3qIA0/1U5W1NcgmWbtD6fXBIB1wIduAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},19426:function(e,n){"use strict";n.Z={src:"https://static.pica-ai.com/_next/static/media/introduce-2.7828d766.png",height:960,width:960,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAY1BMVEXk4OJ5bGnz9/Ts6Ok/SVHT4Oh+e3nd493h5tGzo504ODcqISArNj00PkTO29N5f4DJ1thucm9QOzVeT0lFR0lUXF6qqamTmp4UHSWNk5CpoJy5ra5PUVExLS5kXVofFBRCOjp+L78vAAAACnRSTlP9/v7//vr+/f3+vV+6aAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEZJREFUeJwVxkkWQDAQBcBPIyQ682jM/U/pqVUBJxXTjABtWXmuGnSw8pE18EgpQ9QQmdKV2GKkcodpt1iH+qr+pznnFjN/gx0DscMOtvAAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},60811:function(e,n){"use strict";n.Z={src:"https://static.pica-ai.com/_next/static/media/introduce-3.aec917d2.png",height:960,width:960,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAclBMVEWspqOol5B0UEiUYlKCbWaNeG7W4d/d49rm4eCAYVaPiYObhXvw7O93X1aaemzGvbhdST7n5dCznJJnOCzg6Oy1r6yIaVy7raW3k4xwST2+sajX1M3Kysu9VVHt9epnNCvw29u9nJS3qJ6fc29+QD7JhoCet2HDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARklEQVR4nAXBhQGAMBAEsCuVrwvuzv4rksDDrylhh85WTFEQtAsVF5FwbiMbmCNos0DWVkHnYBojFcrzHrzqCeW77hld+wNwuwOEG8xLBgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},95929:function(e,n){"use strict";n.Z={src:"https://static.pica-ai.com/_next/static/media/step-1.e2c071db.png",height:524,width:612,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAVFBMVEX+/v38/Pz////i3tLGwLzt7ez19fHj4dzY1NHQy8aYgGj5+fbTw6vr6d+soJGvl3+IdGS2p5L58+eoln3f39/OztCShXrCup68saTHvqnUzrV7aFc6cz7OAAAACnRSTlPy////8v//8vLyFWnKjwAAAAlwSFlzAAAQnAAAEJwBJs06NAAAAD9JREFUeJwFwQkCgCAIBMAVA03QVLr7/z+bQWDmGKMi7EfdyiUIwtXLK6A2prkJqLdpoyjovB//ugI5pXXJ+AFIGQJtXl/AFAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:7}},73963:function(e,n){"use strict";n.Z={src:"https://static.pica-ai.com/_next/static/media/step-2.b1219d1e.png",height:524,width:612,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAKlBMVEX////9/f3QxbeTe2TFuq/w7+f39/bH0Mnq7+6jj3nY6OVyYVLv8/KbmYoCV9ubAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nB2LxxEAMAzCRJqdtv+6OfIDIQCQJFSaA/RahzuYRAwrrD373/PO/Bc4eg5zAJpI4ut1AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7}},99651:function(e,n){"use strict";n.Z={src:"https://static.pica-ai.com/_next/static/media/step-3.92fc255f.png",height:524,width:612,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAS1BMVEWljnfVy7LKwafBuKCael1bPCzIs5fOu6D27ubczre4rpTMxKuGa1Tb07zUxK3o4M2rmX+TblrLu6C4oovh18GukHby6dmUhGz8+PSA1gaNAAAACnRSTlP5////8v7y8vLyIoPAFQAAAAlwSFlzAAAQnAAAEJwBJs06NAAAAD5JREFUeJwVxkkSgCAMBMAJUcEs7KD/f6llnxrCJT8aBOwZVomhZVgzDaBJqwn92eNkD/B351V7R0p3vOKBD0nOAlsN0tMMAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7}},1981:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return iW}});var i=t(18421),a=t(98607),r=t(54268),o=t.n(r),l=t(52297),s=t.n(l),c=t(88473),u=t(13404),d=t(36512);function p(){let e=(0,c._)(["\n    padding-bottom: 25vw;\n  "]);return p=function(){return e},e}function f(){let e=(0,c._)(["\n  text-align: center;\n  position: relative;\n  z-index: 1;\n  ","\n  &.dropped {\n    .swap-face-container {\n      background-color: var(--color-colors-brandbg);\n    }\n  }\n"]);return f=function(){return e},e}function m(){let e=(0,c._)(["\n    font-size: var(--font-title-medium);\n    line-height: var(--font-title-medium-H);\n    padding: 0;\n    margin: 0;\n    margin-bottom: var(--spacing-small);\n    max-width: 100%;\n  "]);return m=function(){return e},e}function g(){let e=(0,c._)(["\n  font-size: var(--font-title-large);\n  line-height: var(--font-title-large-H);\n  color: var(--color-colors-contentmain);\n  font-weight: 700;\n  text-align: center;\n  position: relative;\n  max-width: 1080px;\n  margin: var(--spacing-xlarge) auto 8px auto;\n  ","\n"]);return g=function(){return e},e}function h(){let e=(0,c._)(["\n  font-size: var(--font-title);\n  line-height: var(--font-title-medium-H);\n  font-weight: 700;\n  margin-top: var(--spacing-medium);\n"]);return h=function(){return e},e}function v(){let e=(0,c._)(["\n    font-size: var(--font-headline);\n    line-height: var(--font-headline-H);\n    padding: 0 var(--spacing-normal);\n  "]);return v=function(){return e},e}function x(){let e=(0,c._)(["\n  font-size: var(--font-headline);\n  line-height: var(--font-headline-H);\n  color: var(--color-colors-contentsoft);\n  font-weight: 590;\n  text-align: center;\n  ","\n"]);return x=function(){return e},e}function w(){let e=(0,c._)(["\n    box-sizing: border-box;\n    width: 100%;\n    height: auto;\n    min-width: auto;\n    background: transparent;\n    margin: 0 auto;\n    padding: var(--spacing-small) var(--spacing-normal);\n    gap: 0;\n    background: transparent;\n    transition: height .3s;\n  "]);return w=function(){return e},e}function _(){let e=(0,c._)(["\n  display: inline-flex;\n  overflow: hidden;\n  box-sizing: border-box;\n  height: 745px;\n  background-color: var(--color-colors-bgoverlay);\n  border-radius: var(--spacing-large);\n  margin-top: 36px;\n  padding: 24px var(--spacing-normal) 24px var(--spacing-medium);\n  gap: var(--spacing-normal);\n  justify-content: center;\n  ","\n"]);return _=function(){return e},e}function b(){let e=(0,c._)(["\n    gap: var(--spacing-medium);\n  "]);return b=function(){return e},e}function y(){let e=(0,c._)(["\n    width: 100%;\n    gap: var(--spacing-small);\n    &.horizontal {\n      flex-direction: column;\n    }\n  "]);return y=function(){return e},e}function k(){let e=(0,c._)(["\n  display: flex;\n  gap: var(--spacing-large);\n  justify-content: space-between;\n  ","\n  ","\n"]);return k=function(){return e},e}function A(){let e=(0,c._)(["\n    min-width: 300px;\n    padding: 0;\n  "]);return A=function(){return e},e}function C(){let e=(0,c._)(["\n    display: none;\n  "]);return C=function(){return e},e}function Z(){let e=(0,c._)(["\n  flex: 1;\n  width: 100%;\n  min-width: 376px;\n  padding: 32px 28px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  flex-direction: column;\n  ","\n  ","\n"]);return Z=function(){return e},e}let j=u.ZP.div.withConfig({componentId:"sc-382481bc-0"})(f(),d.BC.mobile(p())),I=u.ZP.h1.withConfig({componentId:"sc-382481bc-1"})(g(),d.BC.mobile(m())),S=u.ZP.div.withConfig({componentId:"sc-382481bc-2"})(h()),E=u.ZP.div.withConfig({componentId:"sc-382481bc-3"})(x(),d.BC.mobile(v())),D=u.ZP.div.withConfig({componentId:"sc-382481bc-4"})(_(),d.BC.mobile(w())),T=u.ZP.div.withConfig({componentId:"sc-382481bc-5"})(k(),d.BC.iPad(b()),d.BC.mobile(y())),P=u.ZP.div.withConfig({componentId:"sc-382481bc-6"})(Z(),d.BC.iPad(A()),d.BC.mobile(C()));var R=t(6862),z=t(17945),F=t(3465),N=t(95206);function U(){let e=(0,c._)(["\n    flex: 1;\n    border-radius: var(--spacing-normal);\n  "]);return U=function(){return e},e}function B(){let e=(0,c._)(["\n      width: 100%;\n      height: auto;\n      min-width: unset;\n      max-height: 70vh !important;\n      &.pre-init{\n        min-height: 45vh;\n      }\n    "]);return B=function(){return e},e}function M(){let e=(0,c._)(["\n      object-fit: fill;\n      opacity: 1;\n      width: 100%;\n      height: auto;\n      max-height: 70vh !important;\n      min-height: 30vh;\n      min-width: unset;\n      max-width: unset;\n    "]);return M=function(){return e},e}function V(){let e=(0,c._)(["\n      transform: translateX(-6vw);\n    "]);return V=function(){return e},e}function L(){let e=(0,c._)(["\n        min-height: 30vh;\n      "]);return L=function(){return e},e}function O(){let e=(0,c._)(["\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.3s;\n  border-radius: var(--spacing-medium);\n  position: relative;\n  ","\n  img {\n    opacity: 0;\n    height: 100%;\n    object-fit: cover;\n    min-width: 450px;\n    ","\n  }\n  video {\n    opacity: 0;\n    min-width: ",";\n    max-width: ",";\n    ","\n  }\n  &.focus {\n    ","\n  }\n  &.drop {\n    opacity: 0.5;\n  }\n  &.horizontal {\n    img,\n    video {\n      opacity: 1;\n      width: 100%;\n      height: auto;\n      min-height: 380px;\n      min-width: unset;\n      max-width: unset;\n      ","\n    }\n  }\n"]);return O=function(){return e},e}function H(){let e=(0,c._)([""]);return H=function(){return e},e}function q(){let e=(0,c._)(["\n    border-radius: var(--spacing-normal);\n  "]);return q=function(){return e},e}function W(){let e=(0,c._)(["\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: zoom-in;\n  &.img-shower {\n    position: absolute;\n  }\n  ","\n"]);return W=function(){return e},e}function G(){let e=(0,c._)(["\n    border-radius: var(--spacing-medium);\n  "]);return G=function(){return e},e}function J(){let e=(0,c._)(["\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  &.video-shower {\n    position: absolute;\n  }\n  ","\n"]);return J=function(){return e},e}function X(){let e=(0,c._)(["\n  border-radius: var(--spacing-medium);\n  z-index: 1;\n  cursor: zoom-in;\n  &.loading {\n    cursor: unset;\n  }\n"]);return X=function(){return e},e}function Q(){let e=(0,c._)(["\n    .img-previewer {\n      border-radius: var(--spacing-medium);\n    }\n    &.preview-modal-overlay {\n      padding: 10vh var(--spacing-normal);\n    }\n  "]);return Q=function(){return e},e}function K(){let e=(0,c._)(["\n  ",","," {\n    cursor: unset;\n  }\n  ","\n"]);return K=function(){return e},e}function Y(){let e=(0,c._)(["\n    width: 100%;\n  "]);return Y=function(){return e},e}function $(){let e=(0,c._)(["\n        aspect-ratio: auto !important;\n        img {\n          width: 70%;\n        }\n      "]);return $=function(){return e},e}function ee(){let e=(0,c._)(["\n      aspect-ratio: auto;\n      width: 100%;\n    "]);return ee=function(){return e},e}function en(){let e=(0,c._)(["\n  position: relative;\n  ","\n\n  &.img-previewer-container {\n    &.is-pc {\n      aspect-ratio: 3 / 4 auto;\n      ","\n      overflow: auto;\n    }\n  }\n  &.is-pc {\n    position: relative;\n    border-radius: var(--spacing-medium);\n    overflow: hidden;\n    height: 100%;\n    img.not-loaded {\n      width: 100%;\n    }\n    &.pre-init {\n      aspect-ratio: 3 / 4;\n    }\n    ","\n    &.horizontal {\n      width: 100%;\n      height: auto;\n      min-height: 380px;\n      aspect-ratio: auto;\n    }\n  }\n  &.video-previewer-container {\n    &.in-modal {\n      aspect-ratio: unset;\n    }\n  }\n  .loading-info-holder {\n    display: none;\n  }\n  &.loading {\n    .img-shower {\n      pointer-events: none;\n    }\n    .img-shower,\n    video {\n      filter: blur(8px);\n      transform: scale(1.03);\n    }\n    .loading-info-holder {\n      display: flex;\n      flex-direction: column;\n      gap: 10px;\n      .pica-common-button {\n        margin: 0 auto;\n      }\n    }\n  }\n  &.hide {\n    display: none;\n  }\n"]);return en=function(){return e},e}function et(){let e=(0,c._)(["\n      width: 14.5vw !important;\n      height: 14.5vw !important;\n    "]);return et=function(){return e},e}function ei(){let e=(0,c._)(["\n  width: 100%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  .lottie-render {\n    width: 55px !important;\n    height: 55px !important;\n    ","\n  }\n"]);return ei=function(){return e},e}function ea(){let e=(0,c._)(["\n  margin-top: var(--spacing-normal);\n  font-size: var(--font-body);\n  font-weight: 400;\n  color: var(--color-colors-whitesolid);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  .detail {\n    margin-top: var(--spacing-normal);\n    font-size: 12px;\n  }\n"]);return ea=function(){return e},e}let er=u.ZP.div.withConfig({componentId:"sc-19595c9-0"})(O(),d.BC.mobile(U()),d.BC.mobile(B()),e=>{let{fallbackWidth:n}=e;return n?"".concat(n,"px"):"450px"},e=>{let{fallbackWidth:n}=e;return n?"".concat(n,"px"):"450px"},d.BC.mobile(M()),d.BC.mobile(V()),d.BC.mobile(L()));u.ZP.div.withConfig({componentId:"sc-19595c9-1"})(H());let eo=(0,u.ZP)(F.N).withConfig({componentId:"sc-19595c9-2"})(W(),d.BC.mobile(q())),el=(0,u.ZP)(F.A).withConfig({componentId:"sc-19595c9-3"})(J(),d.BC.mobile(G())),es=u.ZP.video.withConfig({componentId:"sc-19595c9-4"})(X()),ec=(0,u.ZP)(N.u).withConfig({componentId:"sc-19595c9-5"})(K(),eo,es,d.BC.mobile(Q())),eu=u.ZP.div.withConfig({componentId:"sc-19595c9-6"})(en(),d.BC.mobile(Y()),d.BC.iPad($()),d.BC.mobile(ee())),ed=u.ZP.div.withConfig({componentId:"sc-19595c9-7"})(ei(),d.BC.mobile(et())),ep=u.ZP.div.withConfig({componentId:"sc-19595c9-8"})(ea());var ef=t(15554),em=t(98706),eg=t(52809),eh=t(27159),ev=t(95839),ex=JSON.parse('{"v":"5.7.5","fr":100,"ip":0,"op":250,"w":112,"h":112,"nm":"Comp1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":0,"ty":3,"nm":"","sr":1,"ks":{"o":{"a":0,"k":100,"ix":2},"r":{"a":0,"k":0,"ix":2},"p":{"a":1,"k":[{"t":42,"s":[69.432,53.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0.333,0.167],"to":[-0.333,-0.167]},{"t":71,"s":[67.432,52.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0,0],"to":[0,0]},{"t":96,"s":[67.432,52.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0,0],"to":[0,0]},{"t":167,"s":[67.432,52.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0,0],"to":[0,0]},{"t":200,"s":[67.432,52.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[-0.333,-0.167],"to":[0.333,0.167]},{"t":225,"s":[69.432,53.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}}],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":1,"k":[{"t":0,"s":[100,100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":42,"s":[100,100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":71,"s":[100,80],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":96,"s":[150,33],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":121,"s":[100,100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":142,"s":[150,33],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":167,"s":[100,80],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":200,"s":[100,80],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":225,"s":[100,100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}}],"ix":2}},"ao":0,"ip":0,"op":251,"st":0,"bm":0,"hd":false},{"ddd":0,"ind":1,"ty":4,"nm":"路径7(Stroke)","sr":1,"ks":{"o":{"a":0,"k":100,"ix":2},"r":{"a":0,"k":0,"ix":2},"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[100,100],"ix":2}},"ao":0,"hd":false,"parent":0,"shapes":[{"ty":"gr","hd":false,"it":[{"ty":"sh","hd":false,"d":1,"ks":{"a":0,"k":{"c":false,"v":[[1.01,-1.797],[0.015,-2.803],[-0.99,-1.808],[-1.01,1.797],[-0.015,2.803],[0.99,1.808],[1.01,-1.797]],"i":[[0,0],[0.552,0.003],[0.003,-0.552],[0,0],[-0.552,-0.003],[-0.003,0.552],[0,0]],"o":[[0.003,-0.552],[-0.552,-0.003],[0,0],[-0.003,0.552],[0.552,0.003],[0,0],[0.003,-0.552]]}}},{"ty":"gf","o":{"a":0,"k":100,"ix":2},"r":1,"bm":0,"g":{"k":{"a":0,"k":[0,0.05098039215686274,0.9647058823529412,1,0.253,0.05098039215686274,0.9803921568627451,0.8588235294117647,0.505,0.05098039215686274,1,0.7137254901960784,0.753,0.4941176470588236,1,0.6352941176470588,1,0.9372549019607843,1,0.5568627450980392,0,1,0.253,1,0.505,1,0.753,1,1,1],"ix":2},"p":5},"s":{"a":0,"k":[0.334,-2.803],"ix":2},"e":{"a":0,"k":[0.334,2.697],"ix":2},"t":1,"nm":"GradientFill1","mn":"ADBEVectorGraphic-G-Fill","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":2},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":2},"m":1,"hd":false},{"ty":"tr","hd":false,"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[200,200],"ix":2},"r":{"a":0,"k":0,"ix":2},"o":{"a":0,"k":100,"ix":2},"sk":{"a":0,"k":0,"ix":2},"sa":{"a":0,"k":0,"ix":2}}]}],"ip":0,"op":251,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":3,"nm":"","sr":1,"ks":{"o":{"a":0,"k":100,"ix":2},"r":{"a":0,"k":0,"ix":2},"p":{"a":1,"k":[{"t":42,"s":[44.432,53.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0.333,0.167],"to":[-0.333,-0.167]},{"t":71,"s":[42.432,52.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0,0],"to":[0,0]},{"t":96,"s":[42.432,52.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0,0],"to":[0,0]},{"t":167,"s":[42.432,52.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0,0],"to":[0,0]},{"t":200,"s":[42.432,52.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[-0.333,-0.167],"to":[0.333,0.167]},{"t":225,"s":[44.432,53.156],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}}],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":1,"k":[{"t":0,"s":[100,100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":42,"s":[100,100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":71,"s":[100,80],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":96,"s":[150,33],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":121,"s":[100,100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":142,"s":[150,33],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":167,"s":[100,80],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":200,"s":[100,80],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":225,"s":[100,100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}}],"ix":2}},"ao":0,"ip":0,"op":251,"st":0,"bm":0,"hd":false},{"ddd":0,"ind":3,"ty":4,"nm":"路径7(Stroke)","sr":1,"ks":{"o":{"a":0,"k":100,"ix":2},"r":{"a":0,"k":0,"ix":2},"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[100,100],"ix":2}},"ao":0,"hd":false,"parent":2,"shapes":[{"ty":"gr","hd":false,"it":[{"ty":"sh","hd":false,"d":1,"ks":{"a":0,"k":{"c":false,"v":[[1.01,-1.797],[0.015,-2.803],[-0.99,-1.808],[-1.01,1.797],[-0.015,2.803],[0.99,1.808],[1.01,-1.797]],"i":[[0,0],[0.552,0.003],[0.003,-0.552],[0,0],[-0.552,-0.003],[-0.003,0.552],[0,0]],"o":[[0.003,-0.552],[-0.552,-0.003],[0,0],[-0.003,0.552],[0.552,0.003],[0,0],[0.003,-0.552]]}}},{"ty":"gf","o":{"a":0,"k":100,"ix":2},"r":1,"bm":0,"g":{"k":{"a":0,"k":[0,0.05098039215686274,0.9647058823529412,1,0.253,0.05098039215686274,0.9803921568627451,0.8588235294117647,0.505,0.05098039215686274,1,0.7137254901960784,0.753,0.4941176470588236,1,0.6352941176470588,1,0.9372549019607843,1,0.5568627450980392,0,1,0.253,1,0.505,1,0.753,1,1,1],"ix":2},"p":5},"s":{"a":0,"k":[0.334,-2.803],"ix":2},"e":{"a":0,"k":[0.334,2.697],"ix":2},"t":1,"nm":"GradientFill1","mn":"ADBEVectorGraphic-G-Fill","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":2},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":2},"m":1,"hd":false},{"ty":"tr","hd":false,"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[200,200],"ix":2},"r":{"a":0,"k":0,"ix":2},"o":{"a":0,"k":100,"ix":2},"sk":{"a":0,"k":0,"ix":2},"sa":{"a":0,"k":0,"ix":2}}]}],"ip":0,"op":251,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":3,"nm":"","sr":1,"ks":{"o":{"a":0,"k":100,"ix":2},"r":{"a":0,"k":0,"ix":2},"p":{"a":1,"k":[{"t":42,"s":[57.092,71.633],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0.125,0.542],"to":[-0.125,-0.542]},{"t":75,"s":[56.342,68.383],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[0,0],"to":[0,0]},{"t":200,"s":[56.342,68.383],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]},"ti":[-0.125,-0.542],"to":[0.125,0.542]},{"t":225,"s":[57.092,71.633],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}}],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":1,"k":[{"t":42,"s":[100,-100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":75,"s":[114,-92],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":200,"s":[114,-92],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":225,"s":[100,-100],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}}],"ix":2}},"ao":0,"ip":0,"op":251,"st":0,"bm":0,"hd":false},{"ddd":0,"ind":5,"ty":4,"nm":"Vector344(Stroke)","sr":1,"ks":{"o":{"a":0,"k":100,"ix":2},"r":{"a":0,"k":0,"ix":2},"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[100,100],"ix":2}},"ao":0,"hd":false,"parent":4,"shapes":[{"ty":"gr","hd":false,"it":[{"ty":"sh","hd":false,"d":1,"ks":{"a":0,"k":{"c":false,"v":[[-5.623,1.782],[-4.223,1.63],[-4.221,1.627],[-4.188,1.591],[-4.019,1.421],[-3.259,0.855],[0,0],[3.259,0.855],[4.019,1.421],[4.188,1.591],[4.221,1.627],[4.224,1.63],[4.222,1.628],[4.22,1.626],[4.219,1.625],[4.219,1.624],[5.623,1.782],[5.782,0.377],[5,1],[5.781,0.376],[5.781,0.375],[5.779,0.373],[5.776,0.369],[5.767,0.358],[5.742,0.328],[5.661,0.238],[5.377,-0.047],[4.296,-0.855],[0,-2],[-4.296,-0.855],[-5.377,-0.047],[-5.661,0.238],[-5.742,0.328],[-5.767,0.358],[-5.776,0.369],[-5.779,0.373],[-5.781,0.375],[-5.781,0.376],[-5,1],[-5.782,0.377],[-5.623,1.782]],"i":[[-0.432,-0.344],[-0.345,0.426],[-0.001,0.001],[-0.017,0.018],[-0.08,0.074],[-0.347,0.211],[-1.497,0],[-0.689,-0.418],[-0.16,-0.148],[-0.033,-0.036],[-0.005,-0.006],[0,0.001],[0,0],[0,0],[0,0],[0,0],[-0.432,0.344],[0.344,0.432],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0.01,0.012],[0.034,0.037],[0.123,0.113],[0.477,0.289],[1.909,0],[0.959,-0.582],[0.245,-0.227],[0.067,-0.073],[0.02,-0.024],[0.007,-0.008],[0,0],[0,0],[0,0],[0,0],[-0.782,-0.623],[0,0],[-0.432,-0.344]],"o":[[0.43,0.342],[0.001,-0.001],[0.005,-0.006],[0.033,-0.036],[0.16,-0.148],[0.689,-0.418],[1.497,0],[0.347,0.211],[0.08,0.074],[0.017,0.018],[0.002,0.003],[0,0],[0,0],[0,0],[0,0],[0.344,0.431],[0.432,-0.344],[0,0],[0.782,-0.623],[0,0],[0,0],[0,0],[0,0],[-0.007,-0.008],[-0.02,-0.024],[-0.067,-0.073],[-0.245,-0.227],[-0.959,-0.582],[-1.909,0],[-0.477,0.289],[-0.123,0.113],[-0.034,0.037],[-0.01,0.012],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-0.344,0.432],[0.43,0.342]]}}},{"ty":"gf","o":{"a":0,"k":100,"ix":2},"r":1,"bm":0,"g":{"k":{"a":0,"k":[0,0.05098039215686274,0.9647058823529412,1,0.253,0.05098039215686274,0.9803921568627451,0.8588235294117647,0.505,0.05098039215686274,1,0.7137254901960784,0.753,0.4941176470588236,1,0.6352941176470588,1,0.9372549019607843,1,0.5568627450980392,0,1,0.253,1,0.505,1,0.753,1,1,1],"ix":2},"p":5},"s":{"a":0,"k":[-4.282,-1.02],"ix":2},"e":{"a":0,"k":[3.807,1.02],"ix":2},"t":1,"nm":"GradientFill1","mn":"ADBEVectorGraphic-G-Fill","hd":false},{"ty":"fl","c":{"a":0,"k":[0.1843137254901961,0.1843137254901961,0.1843137254901961],"ix":2},"o":{"a":0,"k":100,"ix":2},"r":1,"bm":0,"nm":"Fill1","mn":"ADBEVectorGraphic-Fill","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":2},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":2},"m":1,"hd":false},{"ty":"tr","hd":false,"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[200,200],"ix":2},"r":{"a":0,"k":0,"ix":2},"o":{"a":0,"k":100,"ix":2},"sk":{"a":0,"k":0,"ix":2},"sa":{"a":0,"k":0,"ix":2}}]}],"ip":0,"op":251,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":3,"nm":"","sr":1,"ks":{"o":{"a":0,"k":100,"ix":2},"r":{"a":1,"k":[{"t":0,"s":[0],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}},{"t":250,"s":[360],"i":{"x":[1],"y":[1]},"o":{"x":[0],"y":[0]}}],"ix":2},"p":{"a":0,"k":[57.096,56.3],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[100,100],"ix":2}},"ao":0,"ip":0,"op":251,"st":0,"bm":0,"hd":false},{"ddd":0,"ind":7,"ty":4,"nm":"Union","sr":1,"ks":{"o":{"a":0,"k":100,"ix":2},"r":{"a":0,"k":0,"ix":2},"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[100,100],"ix":2}},"ao":0,"hd":false,"parent":6,"shapes":[{"ty":"gr","hd":false,"it":[{"ty":"gr","hd":false,"it":[{"ty":"sh","hd":false,"d":1,"ks":{"a":0,"k":{"c":false,"v":[[0,-17],[-15.984,-5.804],[-17.569,-4.705],[-19.172,-5.84],[-20.371,-9.704],[-19.712,-10.955],[-18.461,-10.296],[-17.538,-7.322],[0,-19],[19,0],[18,1],[17,0],[0,-17]],"i":[[9.389,0],[2.373,-6.532],[0.598,-0.007],[0.253,0.814],[0,0],[-0.527,0.164],[-0.164,-0.527],[0,0],[-7.9,0],[0,-10.493],[0.552,0],[0,0.552],[9.389,0]],"o":[[-7.349,0],[-0.276,0.76],[-0.604,0.007],[0,0],[-0.164,-0.527],[0.527,-0.164],[0,0],[2.866,-6.857],[10.493,0],[0,0.552],[-0.552,0],[0,-9.389],[-7.349,0]]}}},{"ty":"tm","s":{"a":0,"k":0,"ix":2},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":2},"m":1,"hd":false},{"ty":"tr","hd":false,"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[100,100],"ix":2},"r":{"a":0,"k":0,"ix":2},"o":{"a":0,"k":100,"ix":2},"sk":{"a":0,"k":0,"ix":2},"sa":{"a":0,"k":0,"ix":2}}]},{"ty":"gr","hd":false,"it":[{"ty":"sh","hd":false,"d":1,"ks":{"a":0,"k":{"c":false,"v":[[0,17],[15.984,5.804],[17.569,4.705],[19.172,5.84],[20.371,9.704],[19.712,10.955],[18.461,10.296],[17.538,7.322],[0,19],[-19,0],[-18,-1],[-17,0],[0,17]],"i":[[-9.389,0],[-2.373,6.532],[-0.598,0.007],[-0.253,-0.814],[0,0],[0.527,-0.164],[0.164,0.527],[0,0],[7.9,0],[0,10.493],[-0.552,0],[0,-0.552],[-9.389,0]],"o":[[7.349,0],[0.276,-0.76],[0.604,-0.007],[0,0],[0.164,0.527],[-0.527,0.164],[0,0],[-2.866,6.857],[-10.493,0],[0,-0.552],[0.552,0],[0,9.389],[7.349,0]]}}},{"ty":"tm","s":{"a":0,"k":0,"ix":2},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":2},"m":1,"hd":false},{"ty":"tr","hd":false,"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[100,100],"ix":2},"r":{"a":0,"k":0,"ix":2},"o":{"a":0,"k":100,"ix":2},"sk":{"a":0,"k":0,"ix":2},"sa":{"a":0,"k":0,"ix":2}}]},{"ty":"gf","o":{"a":0,"k":100,"ix":2},"r":1,"bm":0,"g":{"k":{"a":0,"k":[0,0.05098039215686274,0.9647058823529412,1,0.253,0.05098039215686274,0.9803921568627451,0.8588235294117647,0.505,0.05098039215686274,1,0.7137254901960784,0.753,0.4941176470588236,1,0.6352941176470588,1,0.9372549019607843,1,0.5568627450980392,0,1,0.253,1,0.505,1,0.753,1,1,1],"ix":2},"p":5},"s":{"a":0,"k":[-17.485,-19.388],"ix":2},"e":{"a":0,"k":[15.544,19.388],"ix":2},"t":1,"nm":"GradientFill1","mn":"ADBEVectorGraphic-G-Fill","hd":false},{"ty":"tr","hd":false,"p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":2},"s":{"a":0,"k":[200,200],"ix":2},"r":{"a":0,"k":0,"ix":2},"o":{"a":0,"k":100,"ix":2},"sk":{"a":0,"k":0,"ix":2},"sa":{"a":0,"k":0,"ix":2}}]}],"ip":0,"op":251,"st":0,"bm":0}],"markers":[]}'),ew=t(26238),e_=t(25711),eb=t(32898),ey=t(74456),ek=t(88838),eA=t(74395),eC=t(10449);let eZ=()=>{var e,n;let{resultManager:t,tmplManager:i}=(0,a.useContext)(ef.u),[r,o]=(0,a.useState)({}),l=()=>({is_panel_expanded:!!document.querySelector(".pica-mobile-foot-drawer--open")}),s=()=>{var e,n;return{position_source:(null===(e=t.result)||void 0===e?void 0:e.hasComplete)?"faceswap_task_result":(null===(n=i.current)||void 0===n?void 0:n.tmplIdx)===0?"faceswap":"faceswap_replace_face"}},c=(0,em.Z)(e=>n=>{e({...r,...n})}),u=(0,em.Z)((e,n)=>c(t=>{(0,ek.U)(e,{...l(),...n&&n()||{},...t})})),d=u(eA.rl.Exposure,s),p=u(eA.rl.Click,s),f=u(eA.rl.Drag,s),m=u(eA.rl.Task,s),g=u(eA.rl.Media,s);return(0,a.useEffect)(()=>{i.current&&t.result.value&&e();async function e(){var e,n,a,r,l,s,c,u,d,p;if(!i.current)return;let f=null===(e=i.current.tmpl)||void 0===e?void 0:e.videoUrl,m=null!==(p=(null===(n=i.current.tmpl)||void 0===n?void 0:n.videoCoverUrls)&&(null===(a=i.current.tmpl)||void 0===a?void 0:a.videoCoverUrls[0]))&&void 0!==p?p:null===(r=i.current.tmpl)||void 0===r?void 0:r.templateImage,g=await (0,eC.Up)({file:m});o({media_type:f?"video":"image",model_id_list:JSON.stringify({model_id:i.current.tmplIdx>0?[i.current.tmplIdx]:[]}),model_id:i.current.tmplIdx>0?[i.current.tmplIdx]:void 0,media_url:f?t.result.value.generateVideo||(null===(l=i.current.tmpl)||void 0===l?void 0:l.videoUrl):t.result.value.generateImage||(null===(s=i.current.tmpl)||void 0===s?void 0:s.templateImage),video_duration:null===(c=i.current.tmpl)||void 0===c?void 0:c.duration,person_count:null===(u=i.current.tmpl)||void 0===u?void 0:u.faces.length,person_url:null===(d=i.current.tmpl)||void 0===d?void 0:d.faces.map(e=>e.image),position_source:"faceswap_task_result",task_id_string:t.taskId.value,watermarked:!t.result.value.noWatermarkVideo||!t.result.value.noWatermarkImage,width:g.imgWidth,height:g.imgHeight})}},[i.current,null===(e=t.result)||void 0===e?void 0:e.value,null===(n=t.taskId)||void 0===n?void 0:n.value]),{exposureTrack:d,clickTrack:p,dragTrack:f,taskTrack:m,mediaTrack:g,withResult:c,saPublicParams:r}};var ej=t(16930),eI=t(88909);let eS=s()(()=>Promise.all([t.e(3938),t.e(8831),t.e(9884)]).then(t.bind(t,68831)),{loadableGenerated:{webpack:()=>[68831]},ssr:!1}),eE=a.memo(function(e){let{t:n}=(0,z.Z)("index"),t=(0,ew.C)(e_.fK),r=(0,ew.C)(e_.tV),{subscribeCheckerRecusion:l}=(0,ej.Q)(),{children:s,className:c,loading:u,...d}=e,{resultManager:p,reqStatusCollection:f}=(0,a.useContext)(ef.u),m=p.queueInfo.value,g=p.taskId.value,{clickTrack:h}=eZ(),v=f.swapFace.loading||f.hd.loading,x=(0,a.useRef)({renderer:"svg",loop:!0,autoplay:!0,animationData:ex,rendererSettings:{className:"lottie-render"}}),w=(0,em.Z)(()=>{h({action:"speed_up",task_id_string:g}),l({isPaid:!1,url:eI.yL,referrer_type:eA.sN.faceswap})});return(0,i.jsxs)(eu,{className:o()(c,{loading:u}),children:[s,(0,i.jsxs)(ed,{className:"loading-info-holder",children:[v&&(0,i.jsx)(eS,{options:x.current,direction:-1}),(0,i.jsxs)(ep,{children:[n(f.swapFace.loading?"swapping":"generating_hd"),!!(null==m?void 0:m.rank)&&(0,i.jsxs)("div",{className:"detail",children:[!t&&n("task_queue_within_minutes",{x:null==m?void 0:m.rank,m:(0,eb.Z)(m.waitTime)}),t&&n("task_priority_within_minutes",{m:(0,eb.Z)(m.waitTime)})]})]}),!t&&!r&&(0,i.jsx)(ey.T,{isBgripple:!0,onPress:w,size:"small",children:n("speed_up")})]})]})}),eD=a.memo((0,a.forwardRef)(function(e,n){let{style:t,onLoad:r=ev.Z,show:l,hasBeenInit:s,hide:c}=e,{horizontal:u,tmplManager:d,resultManager:p,reqStatusCollection:f,isMobileStyle:m}=(0,a.useContext)(ef.u),{clickTrack:g,exposureTrack:h}=eZ(),[v,x]=(0,a.useState)(!1),w=p.result.value,_=(0,a.useMemo)(()=>{var e;return d.validate.isVideoTemplate?"":w?w.upscaleImage||w.noWatermarkImage||w.generateImage:d.upload.tmpl?d.upload.tmpl.file?window.URL.createObjectURL(d.upload.tmpl.file):d.upload.tmpl.externalUrl:null===(e=d.current.tmpl)||void 0===e?void 0:e.templateImage},[d.current.tmpl,d.upload.tmpl,d.validate.isVideoTemplate,w]),b=(0,em.Z)(()=>{if(l){l();let e={action:"target_media_preview",media_type:"image",media_url:_};g(e),h({...e,action:"target_media_fullscreen"})}c&&c()}),y=f.swapFace.loading||f.hd.loading,k=(0,a.useMemo)(()=>(0,i.jsx)(eE,{loading:y,className:o()("img-previewer-container",{horizontal:u,"pre-init":!s,"is-pc":!m}),children:(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)("img",{ref:n,src:_,style:t,className:o()("img-previewer",{"pre-init":!s,"not-loaded":!v}),alt:"template",onLoad:()=>{x(!0)}}),(0,i.jsx)(eo,{className:"img-shower",src:_,onLoad:r,onClick:b})]})}),[m,t,_,d.current.tmpl,u,f.swapFace.loading,f.hd.loading,v]);return d.validate.isVideoTemplate?null:k})),eT=a.memo((0,a.forwardRef)(function(e,n){let{style:t,onLoad:r=ev.Z,show:l=ev.Z,hasBeenInit:s}=e,c=(0,a.useRef)(null),[u,d]=(0,a.useState)(null),[p,f]=(0,a.useState)(!1),{horizontal:m,tmplManager:g,resultManager:h,reqStatusCollection:v,isMobileStyle:x}=(0,a.useContext)(ef.u),{clickTrack:w,exposureTrack:_}=eZ(),b=h.result.value,y=(0,em.Z)(e=>{r(e.target),f(!0)}),k=(0,em.Z)(e=>{t&&w({action:"video_play",...C}),window.requestAnimationFrame(function(){if(y(e),!x&&!m){let n=e.target,t=n.parentElement,{videoHeight:i,videoWidth:a}=n,{clientHeight:r}=t;d({minWidth:"unset",maxWidth:"unset",width:Math.max(450,a*r/i),opacity:1})}})}),A=(0,a.useMemo)(()=>{var e;return g.validate.isVideoTemplate?b?b.noWatermarkVideo||b.generateVideo:g.upload.tmpl&&g.upload.tmpl.file?window.URL.createObjectURL(g.upload.tmpl.file):null===(e=g.current.tmpl)||void 0===e?void 0:e.videoUrl:""},[g.current.tmpl,g.upload.tmpl,g.validate.isVideoTemplate,b]),C=(0,a.useMemo)(()=>({media_type:"video",media_url:A,position_source:t?"faceswap_selected_media_fullscreen":"faceswap_task_result"}),[A,t]),Z=(0,em.Z)(()=>{if(v.swapFace.loading)return;l();let e={action:"target_media_preview",media_type:"video",media_url:A};w(e),_(e)}),j=(0,em.Z)(()=>{var e;let n=(null===(e=c.current)||void 0===e?void 0:e.muted)?"video_mute":"video_unmute";w({action:n,...C})}),I=(0,em.Z)(()=>{t&&w({action:"video_pause",...C})}),S=(0,em.Z)(e=>{e&&(c.current=e,n&&(n.current=e))});return(0,a.useEffect)(()=>{f(!1)},[A]),(0,a.useEffect)(()=>{d(null)},[g.current.tmpl,g.upload.tmpl,m]),(0,i.jsx)(eE,{className:o()("video-previewer-container",{horizontal:m,"pre-init":!s,"is-pc":!x,"in-modal":!!t,loading:v.swapFace.loading,hide:!g.validate.isVideoTemplate}),children:(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(es,{className:o()("video-previewer",{loading:v.swapFace.loading}),autoPlay:!0,playsInline:!0,muted:!0,loop:!0,controls:!!t,style:t||u,ref:S,src:A,onPlay:k,onClick:Z,onPause:I,onVolumeChange:j}),(0,i.jsx)(el,{className:"video-shower",loaded:p})]})})}));var eP=t(22244);let eR=e=>{let{isDrop:n}=e,{isFocusToSwap:t,horizontal:r,onTemplateLoadEffect:l,tmplManager:s}=(0,a.useContext)(ef.u),{visible:c,trigger:u,show:d,hide:p}=(0,eg.h)("PICA_SWAP_FACE_MODAL"),f=(0,eP.D)(c,!1),m=(0,a.useRef)(null),g=(0,a.useRef)(null),h=(0,a.useRef)(null),v=(0,a.useRef)(null),x=(0,a.useRef)(null),w=(0,a.useRef)(null),[_,b]=(0,a.useState)(null),[y,k]=(0,a.useState)(0),A=(0,eP.D)(y,0),C=(0,em.Z)(()=>{if(!v.current)return 0;let e=v.current.querySelector(".img-previewer")||v.current.querySelector(".video-previewer");if(!e)return 0;k(parseInt(getComputedStyle(e).width))}),[Z,j]=(0,a.useState)(!1),{clickTrack:I}=eZ(),S=(0,em.Z)(e=>{l({horizontal:(null==e?void 0:e.naturalWidth)/(null==e?void 0:e.naturalHeight)>1}),C(),j(!0)}),E=(0,em.Z)(e=>{l({horizontal:e.videoWidth/e.videoHeight>1}),C(),j(!0)}),D=(0,em.Z)(()=>{var e,n,t,i;if(!c)return;let a=0;a=s.validate.isVideoTemplate?(null===(e=g.current)||void 0===e?void 0:e.videoWidth)/(null===(n=g.current)||void 0===n?void 0:n.videoHeight):(null===(t=m.current)||void 0===t?void 0:t.naturalWidth)/(null===(i=m.current)||void 0===i?void 0:i.naturalHeight),b((0,eh.NA)(a,h.current))}),T=(0,em.Z)(e=>{u(e)});return(0,a.useEffect)(()=>{if(f&&!c){var e,n;I({action:"close_by_tap_blank_area",media_url:(null===(e=x.current)||void 0===e?void 0:e.src)||(null===(n=w.current)||void 0===n?void 0:n.src),position_source:"faceswap_target_media_fullscreen"})}},[c]),(0,a.useEffect)(()=>(window&&window.addEventListener("resize",D),()=>{window.removeEventListener("resize",D)}),[]),(0,a.useEffect)(()=>{D()},[c]),(0,i.jsxs)(a.Fragment,{children:[(0,i.jsxs)(er,{fallbackWidth:A,className:o()("previewer-container",{horizontal:r,focus:t&&!r,drop:n}),ref:v,children:[(0,i.jsx)(eD,{ref:m,hasBeenInit:Z,onLoad:S,show:d}),(0,i.jsx)(eT,{ref:g,hasBeenInit:Z,onLoad:E,show:d,fallbackWidth:A})]}),(0,i.jsxs)(ec,{className:o()("swap-face-modal",{horizontal:r}),ref:h,visible:c,onOpenChange:T,children:[(0,i.jsx)(eD,{ref:x,style:_,hide:p}),(0,i.jsx)(eT,{ref:w,style:_})]})]})};var ez=t(99303),eF=t(75274),eN=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...e,children:(0,i.jsx)("path",{fill:"#0A0A0A",d:"M15.933 10a.5.5 0 0 1 .384.82l-3.933 4.72a.5.5 0 0 1-.768 0l-3.933-4.72a.5.5 0 0 1 .385-.82z"})}),eU=t(15712);let eB=e=>/^video\/[a-z0-9\-]+$/.test(e);var eM=t(55969);let eV=(0,a.forwardRef)(function(e,n){let{t}=(0,z.Z)("index"),{isDrop:r}=e,{tmplManager:l,resultManager:s,reqStatusCollection:c,isFocusToSwap:u,horizontal:d,setFocusToSwap:p,focusTemplatePreview:f,refManager:m}=(0,a.useContext)(ef.u),g=l.templateList.list,h=(0,a.useRef)(Array.from({length:5})),v=(0,a.useRef)(null),x=(0,a.useRef)(null),w=(0,a.useRef)(null),{clickTrack:_,exposureTrack:b,dragTrack:y,mediaTrack:k}=eZ(),A=!!(l.upload.tmpl&&(l.upload.tmpl.file||l.upload.tmpl.externalUrl)),C=(0,em.Z)(e=>{f(),e!==l.current.tmplIdx&&l.current.setIdx(e),l.current.setTmpl(g[e]),l.upload.clear()}),Z=(0,em.Z)(()=>{var e;null===(e=v.current)||void 0===e||e.click()}),j=(0,em.Z)(async e=>{let n=e[0];if(k({action:n?"select_media_success":"select_media_failed",media_type:eB(n.type)?"video":"image"}),n.size>eU.Tb){var t,i;null===(t=m.operator)||void 0===t||null===(i=t.current)||void 0===i||i.callMaxSizeExceeded();return}let a=await (0,eC.Od)(n);l.upload.setTmpl({file:a,type:n.type,ready:!1}),_({action:"select_media",media_type:eB(n.type)?"video":"image"})}),I=(0,em.Z)(()=>{p(!1),_({action:"showcase_expand",task_id_string:s.taskId.value})}),S=(0,em.Z)(()=>{k({action:"select_media_cancel"})});return(0,a.useEffect)(()=>{if(w){var e;null===(e=w.current)||void 0===e||e.addEventListener("cancel",S)}return()=>{var e;null===(e=w.current)||void 0===e||e.removeEventListener("cancel",S)}},[]),(0,a.useEffect)(function(){!l.current.tmpl&&g.length&&l.current.setIdx(0)},[l.current.tmpl,g]),(0,a.useEffect)(()=>{b({action:"showcase_list",position_source:"faceswap"})},[]),(0,a.useEffect)(()=>{l.upload.tmpl&&_({action:"select_media",media_type:eB(l.upload.tmpl.type)?"video":"image",position_source:"faceswap_replace_face"})},[l.upload.tmpl]),(0,a.useEffect)(()=>{r&&y({action:"drag_photo"})},[r]),(0,a.useImperativeHandle)(n,()=>({uploadBtnClick:Z})),(0,i.jsx)(eF.qm,{className:o()("template-select-container",{minimize:u,horizontal:d,busying:c.swapFace.loading||c.hd.loading||l.upload.recognizing}),children:(0,i.jsxs)(eF.zr,{className:o()("template-list-holder",{minimize:u,horizontal:d}),children:[(0,i.jsx)(ez.I,{acceptedFileTypes:eU.iZ,onSelect:j,ref:w,children:(0,i.jsxs)(eF.dx,{className:o()("upload-btn-container",{minimize:u,drop:r}),onClick:Z,children:[(0,i.jsx)(eF.JY,{}),(0,i.jsx)(eF.NZ,{}),(0,i.jsx)("span",{children:t("upload")}),(0,i.jsx)(ey.T,{className:"upload-btn",ref:v})]})}),(0,i.jsx)(eF.mm,{ref:x,className:o()("template-item-holder",{hide:u,horizontal:d}),children:g.length?g.map((e,n)=>{if(n>=7)return null;let t={action:"showcase",index:n,media_url:e.gifUrl||e.templateImage,position_source:"faceswap",model_id_list:JSON.stringify({model_id:[e.id]}),media_type:e.duration?"video":"image"};return(0,a.createElement)(eF.cU,{...(0,eM.mH)(t),key:n,onClick:()=>{C(n),_(t)},className:o()("template-item",{active:l.current.tmplIdx===n&&!A}),src:e.gifUrl||e.templateImage})}):h.current.map((e,n)=>(0,i.jsx)(eF.cU,{className:"template-item",src:""},n))}),(0,i.jsx)(ey.k,{icon:eN,onPress:I})]})})});var eL=t(2872),eO=t(82044);function eH(){let e=(0,c._)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n"]);return eH=function(){return e},e}function eq(){let e=(0,c._)(["\n      min-width: unset;\n    "]);return eq=function(){return e},e}function eW(){let e=(0,c._)(["\n      min-width: unset;\n    "]);return eW=function(){return e},e}function eG(){let e=(0,c._)(["\n    padding-bottom: var(--spacing-normal);\n    justify-content: space-between;\n    gap: var(--spacing-small);\n    flex: 1;\n    width: 100%;\n    .thumbnail-content {\n      transform: scale(1.5);\n    }\n  "]);return eG=function(){return e},e}function eJ(){let e=(0,c._)(["\n  display: flex;\n  z-index: 1;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  .pica-common-button {\n    width: 90%;\n    height: 55px;\n  }\n  &.multiple {\n    min-width: 300px;\n    ","\n    ","\n    .pica-common-button, .btns-group {\n      width: 100%;\n    }\n  }\n  .loading {\n    opacity: 0.5;\n  }\n  ","\n"]);return eJ=function(){return e},e}function eX(){let e=(0,c._)(["\n    margin-bottom: 0;\n    &.hasComplete {\n      opacity: 0;\n      height: 0;\n    }\n  "]);return eX=function(){return e},e}function eQ(){let e=(0,c._)(["\n  font-size: var(--font-headline);\n  line-height: var(--font-headline-H);\n  font-weight: 590;\n  margin-bottom: var(--spacing-xlarge);\n  ","\n"]);return eQ=function(){return e},e}function eK(){let e=(0,c._)(["\n    gap: var(--spacing-small);\n  "]);return eK=function(){return e},e}function eY(){let e=(0,c._)(["\n  display: flex;\n  gap: var(--spacing-normal);\n  justify-content: space-between;\n  align-items: center;\n  ","\n"]);return eY=function(){return e},e}function e$(){let e=(0,c._)(["\n    margin-bottom: 0;\n  "]);return e$=function(){return e},e}function e0(){let e=(0,c._)(["\n          width: 19.2vw;\n          height: 19.2vw;\n        "]);return e0=function(){return e},e}function e1(){let e=(0,c._)(["\n          font-size: var(--font-caption-small);\n        "]);return e1=function(){return e},e}function e2(){let e=(0,c._)(["\n            transform: scale(.9);\n            margin-bottom: 0;\n          "]);return e2=function(){return e},e}function e5(){let e=(0,c._)(["\n  margin-bottom: var(--spacing-large);\n  overflow-x: scroll;\n  ","\n  display: flex;\n  &.multiple {\n    gap: var(--spacing-medium);\n    .single-container {\n      flex-direction: column;\n      .face-img {\n        width: 96px;\n        height: 96px;\n        ","\n      }\n      .arrow-holder {\n        svg {\n          transform: rotate(90deg);\n        }\n      }\n      .custom-face-placeholder {\n        font-size: var(--font-caption);\n        font-weight: 450;\n\n        ","\n        svg {\n          transform: scale(1);\n          margin-bottom: var(--spacing-small);\n          ","\n        }\n      }\n      .pica-icon-button {\n        transform: scale(0.8);\n        transform-origin: bottom right;\n      }\n    }\n  }\n"]);return e5=function(){return e},e}function e3(){let e=(0,c._)([""]);return e3=function(){return e},e}function e6(){let e=(0,c._)([""]);return e6=function(){return e},e}function e4(){let e=(0,c._)(["\n  z-index: 1;\n  width: 100%;\n  box-sizing: border-box;\n  &.swap-face-foot-drawer-mask {\n    display: none;\n  }\n  .pica-mobile-foot-drawer__trigger {\n    position: absolute;\n    z-index: 2;\n    background: var(--color-colors-bgmain);\n    width: 10.6vw;\n    height: 10.6vw;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 158px;\n    top: 5.3vw;\n  }\n  .pica-mobile-foot-drawer__default-slot {\n    margin-top: 0;\n    padding-top: var(--spacing-normal);\n    padding-left: 18.9vw;\n    z-index: 1;\n  }\n\n  .pica-mobile-foot-drawer__expand-slot {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    transition: height 0.3s;\n  }\n\n  &.not-been-interact {\n    min-height: unset;\n    overflow: hidden;\n    .pica-mobile-foot-drawer__expand-slot {\n      min-height: unset;\n      .operator-container {\n        gap: unset;\n        padding-bottom: 0;\n      }\n    }\n  }\n  &.hide {\n    opacity: 0;\n  }\n  &.pica-mobile-foot-drawer--open {\n    .pica-mobile-foot-drawer__trigger {\n      top: var(--spacing-small);\n      background: transparent;\n    }\n  }\n"]);return e4=function(){return e},e}let e8=u.ZP.div.withConfig({componentId:"sc-fa0ef7a1-0"})(eH()),e7=u.ZP.div.withConfig({componentId:"sc-fa0ef7a1-1"})(eJ(),d.BC.iPad(eq()),d.BC.mobile(eW()),d.BC.mobile(eG())),e9=u.ZP.div.withConfig({componentId:"sc-fa0ef7a1-2"})(eQ(),d.BC.mobile(eX())),ne=u.ZP.div.withConfig({componentId:"sc-fa0ef7a1-3"})(eY(),d.BC.mobile(eK())),nn=u.ZP.div.withConfig({componentId:"sc-fa0ef7a1-4"})(e5(),d.BC.mobile(e$()),d.BC.mobile(e0()),d.BC.mobile(e1()),d.BC.mobile(e2())),nt=u.ZP.div.withConfig({componentId:"sc-fa0ef7a1-5"})(e3()),ni=u.ZP.div.withConfig({componentId:"sc-fa0ef7a1-6"})(e6()),na=(0,u.ZP)(eO.Z).withConfig({componentId:"sc-fa0ef7a1-7"})(e4());var nr=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",...e,children:(0,i.jsx)("path",{fill:"#0A0A0A",fillOpacity:.3,fillRule:"evenodd",d:"M15.154 23.246a1.067 1.067 0 1 1-1.508 1.508l-8-8a1.067 1.067 0 0 1 0-1.508l8-8a1.067 1.067 0 0 1 1.508 1.508l-6.179 6.18h16.092a1.067 1.067 0 0 1 0 2.133H8.975z",clipRule:"evenodd"})}),no=t(54588),nl=t(16252);function ns(){let e=(0,c._)(["\n    width: 100px;\n    height: 100px;\n  "]);return ns=function(){return e},e}function nc(){let e=(0,c._)(["\n    width: 25.6vw;\n    height: 25.6vw;\n  "]);return nc=function(){return e},e}function nu(){let e=(0,c._)(["\n      transform: scale(0.8);\n      transform-origin: bottom right;\n    "]);return nu=function(){return e},e}function nd(){let e=(0,c._)(["\n  width: 156px;\n  height: 156px;\n  border-radius: 156px;\n  box-sizing: border-box;\n  position: relative;\n  border: 3px dashed var(--color-colors-bgoverlaytop);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  ","\n  ","\n  .pica-icon-button {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    opacity: 0;\n    ","\n  }\n  .circle-loading__container {\n    transform: scale(1.5);\n  }\n  &.has-img {\n    background: url(",");\n    background-size: cover;\n    background-position: center;\n    border: none;\n    .pica-icon-button {\n      opacity: 1;\n    }\n  }\n  &.dropping {\n    background: var(--color-colors-bgoverlaytop);\n  }\n  &.loading {\n    background: var(--color-colors-bgmain);\n    border: 3px dashed var(--color-colors-bgoverlaytop);\n    .pica-icon-button {\n      opacity: 0;\n    }\n  }\n"]);return nd=function(){return e},e}function np(){let e=(0,c._)(["\n    font-weight: 510;\n    font-size: var(--font-caption);\n    line-height: var(--font-caption-H);\n  "]);return np=function(){return e},e}function nf(){let e=(0,c._)(["\n      transform: scale(1.2);\n    "]);return nf=function(){return e},e}function nm(){let e=(0,c._)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: var(--color-colors-contentsoft);\n  font-weight: 590;\n  font-size: var(--font-headline);\n  ","\n  svg {\n    transform: scale(1.5);\n    margin-bottom: var(--spacing-normal);\n    ","\n    path {\n      fill: var(--color-colors-contentsoft);\n      fill-opacity: 0.8;\n    }\n  }\n"]);return nm=function(){return e},e}let ng=u.ZP.div.withConfig({componentId:"sc-462595f4-0"})(nd(),d.BC.iPad(ns()),d.BC.mobile(nc()),d.BC.mobile(nu()),e=>{let{imgUrl:n}=e;return n}),nh=u.ZP.div.withConfig({componentId:"sc-462595f4-1"})(nm(),d.BC.mobile(np()),d.BC.mobile(nf()));var nv=t(87096),nx=t(77161),nw=t(26187),n_=t(96234),nb=t(92815),ny=t(88327),nk=t(87914);let nA=t(60047),nC=e=>new Promise((n,t)=>{let i=e.size,a=new FileReader,r=nA.algo.MD5.create(),o=0;function l(){let n=Math.floor(Math.random()*(i-1048576)),t=Math.min(n+1048576,i);a.readAsArrayBuffer(e.slice(n,t))}a.onload=function(e){var i;let a=null===(i=e.target)||void 0===i?void 0:i.result;if(a instanceof ArrayBuffer){let e=nA.lib.WordArray.create(new Uint8Array(a));if(r.update(e),++o<5)l();else{let e=r.finalize().toString();n(e)}}else t(Error("FileReader 未能加载文件。"))},a.onerror=function(e){t(e)},l()});var nZ=t(57500);let nj=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=(0,nb.R)(eI.mM),[n,t]=(0,a.useState)(""),{loading:i,runAsync:r,cancel:o}=(0,ny.Z)(e,{manual:!0}),l=(0,em.Z)(async e=>{let n=await nC(e),t="".concat(n,"-").concat(new Date().getTime(),".mp4"),i=await r({fileName:t});return{...i,md5HashName:t}}),{loading:s,runAsync:c,cancel:u}=(0,ny.Z)((e,n)=>nZ.default.put(e,n,{headers:{"Content-Type":n.type}}),{manual:!0,retryCount:1}),{loading:d,reqStart:p,reqEnd:f}=(0,nk.f)(s,i),m=async function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];p();let{s3Url:i,uploadUrl:a,md5HashName:r}=await l(e),o=new File([e],r,{type:e.type});return n?c(a,o).then(e=>{console.info("upload to s3",e),f()}):(await c(a,o),f()),t(i),i},g=(0,em.Z)(()=>{o(),u()});return{getS3Url:l,uploadToS3:m,cancelUploadS3:g,getS3UrlLoading:i,uploading:d,uploadVideoUrl:n}},nI={sever_detect_start:"sever_detect_start",server_detect_success:"server_detect_success",server_detect_failed:"server_detect_failed",upload_media_start:"upload_media_start",upload_media_success:"upload_media_success",upload_media_failed:"upload_media_failed"},nS=()=>{let e=(0,nb.R)(eI.QN,"post"),{runAsync:n,loading:t,cancel:i}=(0,ny.Z)(e,{manual:!0}),a=(0,em.Z)(e=>n({templateImages:[e],type:"image_max_face"},{showCreditTips:!0})),r=(0,em.Z)(e=>n({templateImages:[e],type:"image_face_swap"},{showCreditTips:!0})),o=(0,em.Z)(e=>n({templateImages:e,type:"video_face_swap"},{showCreditTips:!0}));return{recognizing:t,_recognizeCustomFace:a,_recognizeCustomImgTemplate:r,_recognizeCustomVideoTemplate:o,_cancelRecognize:i}},nE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{noFaceRecognizedCallback:n=ev.Z,commonErrorCallback:t=ev.Z,NSFWErrorCallback:i=ev.Z}=e,{uploadStart:a,uploading:r,uploadCancel:o}=(0,n_._x)(),{multiUploadStart:l,multiUploading:s,multiUploadCancel:c}=(0,n_.ZX)(),{uploading:u,uploadToS3:d,cancelUploadS3:p}=nj(),{recognizing:f,_recognizeCustomFace:m,_recognizeCustomImgTemplate:g,_recognizeCustomVideoTemplate:h,_cancelRecognize:v}=nS(),{loading:x,reqStart:w,reqEnd:_}=(0,nk.f)(r,u,f),{mediaTrack:b}=eZ(),y=(0,em.Z)(()=>{o(),p(),v(),_()}),k=(0,em.Z)(async e=>{w();let r=Date.now();try{let{formData:t}=await (0,eC.r5)({file:e,maxSize:eC.L7}),{imageUrl:o}=await a(t);b({action:nI.sever_detect_start,media_type:"image",media_url:o,position_source:"faceswap_add_face"});let l=await m(o),{code:s,message:c}=l;if(s){if(29403===s){i(c);return}if(29413===s){n();return}throw b({action:nI.server_detect_failed,media_type:"image",media_url:o,position_source:"faceswap_add_face"}),y(),Error(c)}return b({action:nI.server_detect_success,media_type:"image",media_url:o,duration:(Date.now()-r)/1e3,position_source:"faceswap_add_face"}),l[0].image}catch(e){t(),y(),console.info("err =>",e)}finally{_()}}),A=(0,em.Z)(async e=>{w();let r=Date.now();try{let t=await (0,eC.r5)({file:e,maxSize:eC.L7}),o=t.src;if("string"!=typeof e){let{imageUrl:e}=await a(t.formData);o=e}b({action:nI.sever_detect_start,media_type:"image",media_url:o,position_source:"faceswap"});let l=await g(o),{code:s,message:c}=l;if(s){if(29403===s){i(c);return}if(29413===s){n();return}throw b({action:nI.server_detect_failed,media_type:"image",media_url:o,position_source:"faceswap"}),y(),Error(c)}return b({action:nI.server_detect_success,media_type:"image",media_url:o,duration:(Date.now()-r)/1e3,position_source:"faceswap_add_face"}),{imageUrl:o,faces:l.splice(0,3)}}catch(e){t(),y()}finally{_()}}),C=(0,em.Z)(async e=>{w();let a=Date.now();try{let t=0,r=await (0,eC.qL)(e,10,e=>{t=e/1e3}),o=await Promise.all(r.map(e=>(0,eC.Up)({file:e}))),s=await l(o.map(e=>e.formData));b({action:nI.sever_detect_start,media_type:"video",position_source:"faceswap"});let c=await h(s.map(e=>e.imageUrl)),{code:u,message:p}=c;if(u){if(29403===u){i(p);return}if(29413===u){n();return}throw b({action:nI.server_detect_failed,media_type:"video",position_source:"faceswap",duration:(Date.now()-a)/1e3}),y(),Error(p)}console.info("开始上传视频到 s3  =>"),b({action:nI.upload_media_start,media_type:"video",position_source:"faceswap"});let f=await d(e,!1);return b({action:nI.upload_media_success,media_type:"video",position_source:"faceswap",duration:(Date.now()-a)/1e3}),console.info("上传视频到 s3  =>",f),{videoUrl:f,faces:c.splice(0,3),imageUrls:s.map(e=>e.imageUrl),duration:t}}catch(e){t(),y(),console.info("err =>",e)}finally{_()}});return{loading:x,recognizeCustomFace:k,recognizeCustomImgTemplate:A,recognizeCustomVideoTemplate:C,cancel:y}};var nD=t(20033);let nT="CLEAR_OPERATOR_ERROR",nP="SET_OPERATOR_ERROR",nR="SET_OPERATOR_RETRY",nz=()=>{let[e,n]=(0,a.useState)(""),[t,i]=(0,a.useState)(!1),[r,o]=(0,a.useState)(()=>ev.Z),l=(0,em.Z)(()=>{n(""),o(()=>ev.Z)}),s=(0,em.Z)(e=>{let{content:t,needRetry:a=!1}=e;n(t),i(a)});return(0,a.useEffect)(()=>(nD.T.on(nT,l),nD.T.on(nP,s),nD.T.on(nR,o),()=>{nD.T.off(nT),nD.T.off(nP),nD.T.off(nR)}),[]),{errorReason:e,needRetry:t,retry:r}},nF=()=>{let e=(0,em.Z)(()=>{nD.T.emit(nT)}),n=(0,em.Z)(e=>{nD.T.emit(nP,e)}),t=(0,em.Z)(e=>{nD.T.emit(nR,()=>e)});return{clearError:e,setError:n,setRetry:t}},nN=a.memo((0,a.forwardRef)(function(e,n){var t;let{t:r}=(0,z.Z)("index"),{face:l,index:s,setFace:c,notSupportCallback:u,noFaceRecognizedCallback:d,commonErrorCallback:p,isDropActive:f}=e,m=(0,eP.D)(l.file,l.file),{focusTemplatePreview:g,tmplManager:h,reqStatusCollection:v,resultManager:x}=(0,a.useContext)(ef.u),w=(0,a.useRef)(null),_=(0,a.useRef)(null),b=(0,a.useRef)(null),{clearError:y}=nF(),{clickTrack:k,dragTrack:A,mediaTrack:C}=eZ(),Z=(0,a.useMemo)(()=>!!l.imgUrl,[l]),{loading:j,recognizeCustomFace:I,cancel:S}=nE({noFaceRecognizedCallback:d,commonErrorCallback:p,namespace:"custom-face"}),E=(0,em.Z)(async(e,n,t)=>{let i=await (0,eC.Od)(n);c(e,i,t)}),D=(0,em.Z)(async e=>{let n=await I(e);n&&E(s,e,n)}),T=j||v.swapFace.loading||v.hd.loading,P=(0,em.Z)(()=>{C({action:"select_media_cancel"})});(0,a.useEffect)(()=>{c(s,void 0,void 0,j)},[j]),(0,a.useEffect)(()=>{m!==l.file&&e();async function e(){l.file&&(x.result.set(null),g(),await D(l.file))}},[l.file]),(0,a.useEffect)(()=>{S()},[h.current.tmplIdx]);let{dropProps:R,isDropTarget:F}=(0,eL.L)({ref:w,async onDrop(e){let n=e.items.find(e=>"file"===e.kind&&(0,eh.Or)(e.type));if(n){y();let e=await n.getFile();E(s,e,"")}else u()},isDisabled:T}),N=(0,em.Z)(async e=>{y();let n=e[0];E(s,n,""),k({action:"select_face",position_source:"faceswap_replace_face",media_type:"image",media_url:n.name}),C({action:n?"select_media_success":"select_media_failed",media_type:"image",position_source:"faceswap_add_face"})}),U=(0,em.Z)(()=>{var e;y(),null===(e=_.current)||void 0===e||e.click(),k({action:x.result.hasComplete?"edit_face":"add_face",task_id_string:x.result.hasComplete?x.taskId.value:""})}),B=(0,em.Z)(()=>j?(0,i.jsx)(nw.x,{}):l.imgUrl?void 0:(0,i.jsxs)(nh,{className:"custom-face-placeholder",children:[(0,i.jsx)(nx.Z,{}),r("add_face")]}));return(0,a.useImperativeHandle)(n,()=>({uploadClick:U})),(0,a.useEffect)(()=>{if(b){var e;null===(e=b.current)||void 0===e||e.addEventListener("cancel",P)}return()=>{var e;null===(e=b.current)||void 0===e||e.removeEventListener("cancel",P)}},[]),(0,a.useEffect)(()=>{F&&A({action:"drag_photo"})},[F]),(0,i.jsx)(ez.I,{onSelect:N,acceptedFileTypes:eU.d1,ref:b,children:(0,i.jsxs)(ng,{ref:w,...R,onClick:U,imgUrl:l.imgUrl,className:o()("custom-face face-img",{"has-img":Z,loading:j,dropping:F||f&&0===s}),...(0,eM.mH)({action:"faceswap_replace_face",model_id_list:JSON.stringify({model_id_list:[h.current.tmplIdx]}),media_type:(null===(t=h.current.tmpl)||void 0===t?void 0:t.duration)?"video":"image"}),children:[B(),(0,i.jsx)(ey.k,{ref:_,icon:nv.Z,isDisabled:T})]})})}));function nU(){let e=(0,c._)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: var(--color-colors-contentsoft);\n  font-weight: 590;\n  svg {\n    transform: scale(0.6);\n    path {\n      fill: var(--color-colors-contentsoft);\n      fill-opacity: 1;\n    }\n  }\n"]);return nU=function(){return e},e}function nB(){let e=(0,c._)(["\n    width: 100px;\n    height: 100px;\n  "]);return nB=function(){return e},e}function nM(){let e=(0,c._)(["\n    width: 25.6vw;\n    height: 25.6vw;\n  "]);return nM=function(){return e},e}function nV(){let e=(0,c._)(["\n  width: 156px;\n  height: 156px;\n  border-radius: 156px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  &.empty-face {\n    cursor: pointer;\n    border: 3px dashed var(--color-colors-bgoverlaytop);\n    background-color: transparent;\n  }\n  ","\n  ","\n"]);return nV=function(){return e},e}let nL=u.ZP.div.withConfig({componentId:"sc-ca4d21e1-0"})(nU()),nO=(0,u.ZP)(F.N).withConfig({componentId:"sc-ca4d21e1-1"})(nV(),d.BC.iPad(nB()),d.BC.mobile(nM()));var nH=e=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"currentWidth",height:"currentHeight",fill:"none",viewBox:"0 0 64 65",...e,children:[(0,i.jsx)("path",{fill:"#0A0A0A",fillOpacity:.5,d:"M50.667 12.933H13.333c-.589 0-1.066.478-1.066 1.067v37.333c0 .59.477 1.067 1.066 1.067h29.334a2.133 2.133 0 0 1 0 4.267H13.333A5.333 5.333 0 0 1 8 51.333V14a5.333 5.333 0 0 1 5.333-5.333h37.334A5.333 5.333 0 0 1 56 14v23.467a2.134 2.134 0 0 1-4.267 0V14c0-.589-.477-1.067-1.066-1.067"}),(0,i.jsx)("path",{fill:"#0A0A0A",fillOpacity:.5,d:"M48.26 35.503a2.133 2.133 0 0 0-2.294-1.958c-11.574.917-21.607 4.005-26.81 13.336a2.133 2.133 0 0 0 3.727 2.078c4.102-7.357 12.165-10.27 23.42-11.16a2.133 2.133 0 0 0 1.958-2.296M22.667 27.333a4 4 0 1 0 0-8 4 4 0 0 0 0 8M55.734 43.867v3.2h3.2a2.133 2.133 0 1 1 0 4.267h-3.2v3.2a2.133 2.133 0 1 1-4.267 0v-3.2h-3.2a2.133 2.133 0 1 1 0-4.267h3.2v-3.2a2.133 2.133 0 1 1 4.267 0"})]});let nq=a.memo((0,a.forwardRef)(function(e,n){let{refManager:t,tmplManager:r}=(0,a.useContext)(ef.u),{t:l}=(0,z.Z)("index"),{face:s,index:c}=e,u=!s.image;return(0,i.jsx)(nO,{src:s.image,hasError:u,className:o()("face-img",{"empty-face":u}),onClick:()=>{var e;u&&(null===(e=t.tmplSelector.current)||void 0===e||e.uploadBtnClick())},children:(0,i.jsx)(a.Fragment,{children:u&&(0,i.jsxs)(nL,{children:[(0,i.jsx)(nH,{width:"64",height:"65"}),l("upload")]})})})}));function nW(){let e=(0,c._)(["\n  display: flex;\n  width: 90%;\n  margin-bottom: var(--spacing-normal);\n  gap: var(--spacing-small);\n  .pica-common-button:last-child {\n    flex: 1;\n  }\n  &.equal {\n    .pica-common-button:last-child {\n      flex: auto;\n    }\n    .pica-common-button__icon {\n      svg {\n        transform: scale(1.2);\n        path {\n          /* fill: var(--color-colors-contentmain); */\n          fill-opacity: 1;\n        }\n      }\n    }\n  }\n"]);return nW=function(){return e},e}function nG(){let e=(0,c._)(["\n    .hd-btn,.watermark-btn {\n      display: none\n    }\n    &.has-watermark {\n      .watermark-btn {\n        display: block;\n      }\n      .download-btn {\n        width: unset;\n        .pica-common-button__text{\n          display: none;\n        }\n        .pica-common-button__icon {\n          margin: 0 var(--spacing-xsmall);\n        }\n      }\n      &.is-video {\n        .download-btn-gif {\n          display: none\n        }\n      }\n    }\n    &.has-hd {\n      .hd-btn {\n        width: unset;\n        display: block;\n        .pica-common-button__text{\n          display: none;\n        }\n        .pica-common-button__icon {\n          margin: 0 var(--spacing-xsmall);\n        }\n      }\n    }\n  "]);return nG=function(){return e},e}function nJ(){let e=(0,c._)(["\n  width: 100%;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--spacing-normal);\n  .hd-btn,\n  .watermark-btn {\n    display: none;\n  }\n  &.has-watermark {\n    .watermark-btn {\n      display: block;\n    }\n    .hd-btn {\n      display: none;\n    }\n  }\n  &.has-hd {\n    .hd-btn {\n      display: block;\n    }\n    .watermark-btn {\n      display: none;\n    }\n  }\n\n  ","\n"]);return nJ=function(){return e},e}let nX=u.ZP.div.withConfig({componentId:"sc-af9f18f9-0"})(nW()),nQ=u.ZP.div.withConfig({componentId:"sc-af9f18f9-1"})(nJ(),d.BC.mobile(nG()));var nK=t(67545);let nY=a.memo((0,a.forwardRef)(function(e,n){let t=(0,i.jsx)("div",{}),{$downloadImg:r,$downloadGif:l,$downloadMP4:s,$removeWatermark:c,$hdSwapFaceResult:u,$swap:d,$notifyme:p,$speedUp:f,isReadyToSwap:m}=e,g=(0,ew.C)(e_.fK),h=(0,ew.C)(e_.tV),{isMobileStyle:v}=(0,nK.S)(),{resultManager:x,tmplManager:w,reqStatusCollection:_}=(0,a.useContext)(ef.u),b=w.validate.isVideoTemplate,y=x.result.value;if(x.result.hasComplete){let e=g&&!b&&!y.upscaleImage,n=b?!y.noWatermarkVideo:!y.noWatermarkImage,t=null;return t=b?(0,i.jsxs)(nX,{className:"btns-group equal",children:[l,s]}):r,(0,i.jsx)(nQ,{className:o()("btns-wrapper",{"has-watermark":n,"has-hd":e,"is-video":b}),children:v?(0,i.jsxs)(nX,{className:o()("btns-group",{"has-watermark":n,"has-hd":e}),children:[c,u,t]}):(0,i.jsxs)(i.Fragment,{children:[c,u,t]})})}return m&&!_.swapFace.loading?d:_.swapFace.loading?h?f:p:t}));var n$=t(30779),n0=t(39721),n1=t(69628),n2=t(8138),n5=t(50196);let n3=(0,a.memo)((0,a.forwardRef)(function(e,n){let{t}=(0,z.Z)("index"),{btnContent:r,withoutIcon:o,...l}=e,{resultManager:s,reqStatusCollection:c}=(0,a.useContext)(ef.u),{withResult:u,clickTrack:d}=eZ(),p=s.result.value,f=p.upscaleImage||p.noWatermarkImage||p.generateImage;return p?(0,i.jsx)(n2.Z,{preload:!0,url:f,name:(0,n1.tO)({sourceType:n0.$T.PIC_FACE_SWAP}),fileType:n5.cH.png,onStart:()=>{u(d)({action:"download_image"}),c.download.setLoading(!0)},onFinish:()=>{c.download.setLoading(!1)},render:e=>(0,i.jsx)(ey.T,{className:"download-btn",icon:o?void 0:(0,i.jsx)(n$.Z,{}),isLoading:e.loading,isDisabled:c.hd.loading||c.watermark.loading,iconFillFollowTheme:!0,...l,onPress:e.onDownload,children:r||t("download")})}):null})),n6=(0,a.memo)((0,a.forwardRef)(function(e,n){let{t}=(0,z.Z)("index"),{btnContent:r,withoutIcon:o,...l}=e,{resultManager:s,reqStatusCollection:c}=(0,a.useContext)(ef.u),{withResult:u,clickTrack:d}=eZ(),p=s.result.value,f=p.noWatermarkGif||p.generateGif;return p?(0,i.jsx)(n2.Z,{url:f,name:(0,n1.tO)({sourceType:n0.$T.PIC_FACE_SWAP}),fileType:n5.cH.gif,onStart:()=>{u(d)({action:"download_gif"}),c.download.setLoading(!0)},onFinish:()=>{c.download.setLoading(!1)},render:e=>(0,i.jsx)(ey.T,{className:"download-btn-gif",icon:o?void 0:(0,i.jsx)(n$.Z,{}),iconFillFollowTheme:!0,isDisabled:c.watermark.loading||c.download.loading,isLoading:e.loading,...l,onPress:e.onDownload,children:r||t("gif")})}):null})),n4=(0,a.memo)((0,a.forwardRef)(function(e,n){let{t}=(0,z.Z)("index"),{btnContent:r,withoutIcon:o,...l}=e,{resultManager:s,reqStatusCollection:c}=(0,a.useContext)(ef.u),{withResult:u,clickTrack:d}=eZ(),p=s.result.value,f=p.noWatermarkVideo||p.generateVideo;return p?(0,i.jsx)(n2.Z,{url:f,name:(0,n1.tO)({sourceType:n0.$T.VIDEO_FACE_SWAP}),fileType:n5.cH.mp4,onStart:()=>{u(d)({action:"download_mp4"}),c.download.setLoading(!0)},onFinish:()=>{c.download.setLoading(!1)},render:e=>(0,i.jsx)(ey.T,{className:"download-btn-mp4",icon:o?void 0:(0,i.jsx)(n$.Z,{}),iconFillFollowTheme:!0,isDisabled:c.watermark.loading||c.download.loading,isLoading:e.loading,...l,onPress:e.onDownload,children:r||t("mp4")})}):null}));var n8=t(16611);let n7=(0,a.memo)((0,a.forwardRef)(function(e,n){let{t}=(0,z.Z)("index"),{reqStatusCollection:r}=(0,a.useContext)(ef.u);return(0,i.jsx)(ey.T,{className:"hd-btn",isNormal:!0,onPress:()=>e.hdSwap(),isLoading:r.hd.loading,isDisabled:r.download.loading,iconFillFollowTheme:!0,icon:(0,i.jsx)(n8.Z,{}),children:t("upscale")})}));var n9=t(64659),te=t(12261);let tn=(0,a.memo)((0,a.forwardRef)(function(e,n){let{inDrawer:t}=e,{t:r}=(0,z.Z)("index"),{clickTrack:o}=eZ(),{resultManager:l,reqStatusCollection:s,tmplManager:c}=(0,a.useContext)(ef.u),{getUserInfo:u}=(0,n9.J)(),d=()=>{l.reset(),s.cancelAll(),c.current.setIdx(0),(0,te.g)(),u()},p=(0,em.Z)(()=>{o({action:"run_in_background",position_source:"faceswap_task_result_waiting",task_id_string:l.taskId.value}),d()});return(0,i.jsx)(ey.T,{isNormal:!0,isDisabled:!s.swapFace.querying,onPress:p,...e,children:r(t?"notify":"run_in_background")})}));var tt=t(7181);let ti=()=>{let{tmplManager:e,resultManager:n,reqStatusCollection:t}=(0,a.useContext)(ef.u),{rmImgSwapFaceWatermark:i,rmVideoSwapFaceWatermark:r,loading:o}=(0,tt.b)(),l=(0,em.Z)(()=>{var t;let a={taskId:null===(t=n.result.value)||void 0===t?void 0:t.taskId};e.validate.isVideoTemplate?r(null,{params:a}).then(e=>{e&&n.result.set(n=>({...n,noWatermarkGif:e.noWatermarkGif,noWatermarkVideo:e.noWatermarkVideo}))}):i(null,{params:a}).then(e=>{e&&n.result.set(n=>({...n,noWatermarkImage:e.noWatermarkImage}))})});return(0,a.useEffect)(()=>{t.watermark.setLoading(o)},[o]),{startRmWatermark:l}};var ta=t(10816);let tr=(0,a.memo)((0,a.forwardRef)(function(e,n){let{startRmWatermark:t}=ti(),{reqStatusCollection:r}=(0,a.useContext)(ef.u),{t:o}=(0,z.Z)("index"),{withResult:l,clickTrack:s}=eZ(),c=(0,em.Z)(()=>{t(),l(s)({action:"remove_watermark"})});return(0,i.jsx)(ey.T,{className:"watermark-btn",isNormal:!0,onPress:c,isDisabled:r.download.loading,isLoading:r.watermark.loading,icon:(0,i.jsx)(ta.Z,{}),iconFillFollowTheme:!0,children:o("enhance_watermark")})})),to=(0,a.memo)((0,a.forwardRef)(function(e,n){let{subscribeCheckerRecusion:t}=(0,ej.Q)(),{t:r}=(0,z.Z)("index"),{clickTrack:o}=eZ(),{resultManager:l}=(0,a.useContext)(ef.u),s=(0,em.Z)(()=>{var e;o({action:"speed_up",task_id_string:l.taskId.value,position_source:"faceswap_task_result_waiting"}),t({isPaid:!1,url:eI.yL,task_id_string:l.taskId.value,referrer_type:eA.sN.faceswap,media_type:(null===(e=l.result.value)||void 0===e?void 0:e.generateVideo)?eA.bs.video:eA.bs.image})});return(0,i.jsx)(ey.T,{isNormal:!0,onPress:s,...e,children:r("speed_up")})})),tl=(0,a.memo)((0,a.forwardRef)(function(e,n){let{swap:t,...r}=e,{t:o}=(0,z.Z)("index"),{reqStatusCollection:l,setFocusToSwap:s}=(0,a.useContext)(ef.u),{clearError:c}=nF();return(0,i.jsx)(ey.T,{onPress:()=>{t(),s(!0),c()},isLoading:l.swapFace.loading,...r,children:o("swap")})}));var ts=t(32846);let tc=e=>{let{t:n}=(0,z.Z)("index"),{getContainer:t}=e,{resultManager:i,reqStatusCollection:r}=(0,a.useContext)(ef.u),{isMobile:o}=(0,ts.ZP)(),{errorReason:l,needRetry:s,retry:c}=nz(),{setError:u}=nF(),d=(0,a.useMemo)(()=>!!l,[l]),{showToast:p,...f}=(0,nl.pm)({getContainer:t,style:{bottom:"10%"}}),m=(0,em.Z)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o?p(e,nl.pC.ERROR):u({content:e,needRetry:n})}),g=(0,em.Z)(()=>{let e=n("unsupported_file_format");m(e)}),h=(0,em.Z)(()=>{let e=n("file_size_exceeded");m(e)}),v=(0,em.Z)(()=>{let e=n("no_face_recognized_");m(e)}),x=(0,em.Z)(()=>{let e=n("face_upload_failed_");m(e)}),w=(0,em.Z)((e,n)=>{n?(i.reset(),r.cancelAll()):m(e)});return{hasError:d,errorReason:l,toastProps:f,needRetry:s,retry:c,callNotSupportFileType:g,callMaxSizeExceeded:h,callNoFaceRecognized:v,callCommonUploadError:x,callCommonSwapFaceError:w}},tu={faces:[],gifUrl:"",height:0,id:-1,name:"",templateImage:"",type:"PIC",videoUrl:"",width:0,duration:0,videoCoverUrls:[]},td={image:""},tp=()=>{let{tmplManager:e,setFocusToSwap:n}=(0,a.useContext)(ef.u),[t,i]=(0,a.useState)([]),[r,o]=(0,a.useState)([]),l=(0,a.useMemo)(()=>t.filter(e=>!!e.imgUrl).length,[t]),s=(0,em.Z)(async()=>{var n,i,a,o,l;if(!e.current.tmpl)return;let s={templateId:null===(n=e.current.tmpl)||void 0===n?void 0:n.id};if(e.validate.isVideoTemplate){let n=e.current.tmpl.duration;e.upload.tmpl&&(n=await (0,eC.Mf)(null===(l=e.upload.tmpl)||void 0===l?void 0:l.file,!1));let c={...s,multiFaceParam:t.map((e,n)=>({source:e.imgUrl,target:r[n].image})).filter(e=>!!e.source),duration:n,videoUrl:null===(i=e.current.tmpl)||void 0===i?void 0:i.videoUrl,cover:(null===(a=e.current.tmpl)||void 0===a?void 0:a.videoCoverUrls)&&(null===(o=e.current.tmpl)||void 0===o?void 0:o.videoCoverUrls[0])};return c}let c={...s,faces:t.map((e,n)=>({faceIdx:[r[n].idx],image:e.imgUrl})).filter(e=>!!e.image),templateImage:e.current.tmpl.templateImage};return c}),c=(0,em.Z)((e,n,a,r)=>{let o=t.map((t,i)=>{if(i===e){let e=n||t.file,i=void 0!==a?a:t.imgUrl,o=r||!1;return{...t,file:e,imgUrl:i,loading:o}}return t});i(o)}),u=(0,a.useMemo)(()=>l>0&&r.filter(e=>null==e?void 0:e.image).length>0,[t,r]),d=(0,a.useMemo)(()=>!!t.length,[t]),p=(0,a.useMemo)(()=>t.length>1,[t]),f=!!(e.upload.tmpl&&!e.upload.tmpl.ready);return(0,a.useEffect)(function(){e.current.tmpl&&e.current.tmpl.faces.length?(1===t.length&&1===e.current.tmpl.faces.length||i(Array.from({length:e.current.tmpl.faces.length}).fill({file:null,imgUrl:"",loading:!1})),o(e.current.tmpl.faces)):(i([{file:null,imgUrl:"",loading:!1}]),o([td]))},[e.current.tmpl]),{customFaces:t,templateFaces:r,customFacesReadyCount:l,getSwapFacesParams:s,isReadyToSwap:u,hasFaceToShow:d,isMultipleFace:p,hasUnReadyUploadFile:f,setCustomFace:c,setCustomFaces:i}};function tf(){let e=(0,c._)(["\n  transform: scale(2);\n"]);return tf=function(){return e},e}function tm(){let e=(0,c._)(["\n  color: var(--color-colors-contentsoft);\n  font-size: var(--color-colors-caption);\n  font-weight: 400;\n  margin-top: var(--spacing-medium);\n"]);return tm=function(){return e},e}let tg=(0,u.ZP)(nw.x).withConfig({componentId:"sc-de0b385-0"})(tf()),th=u.ZP.div.withConfig({componentId:"sc-de0b385-1"})(tm()),tv=()=>{let{t:e}=(0,z.Z)("index");return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(tg,{}),(0,i.jsx)(th,{children:e("recognizing_faces_in_photo")})]})};function tx(){let e=(0,c._)([""]);return tx=function(){return e},e}function tw(){let e=(0,c._)(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  gap: var(--spacing-small);\n  .arrow-holder {\n    transform: scale(0.8);\n  }\n"]);return tw=function(){return e},e}function t_(){let e=(0,c._)(["\n  position: relative;\n  width: 19.2vw;\n"]);return t_=function(){return e},e}function tb(){let e=(0,c._)(["\n  border-radius: 156px;\n  box-sizing: border-box;\n  border: ",";\n  width: 12.8vw;\n  height: 12.8vw;\n  background: ",";\n  background-size: cover;\n  background-position: center;\n  position: relative;\n  z-index: 1;\n  &.loading {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: var(--color-colors-bgmain);\n    border: 2px dashed var(--color-colors-bgoverlaytop);\n    svg {\n      display: block;\n      transform: unset;\n    }\n  }\n  svg {\n    display: ",";\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n  &.thumb-template-face {\n    svg {\n      transform: scale(0.5) translate(-100%, -100%);\n    }\n  }\n"]);return tb=function(){return e},e}function ty(){let e=(0,c._)(["\n  position: absolute;\n  top: -1px;\n  left: 6.4vw;\n  z-index: 2;\n  border: 2px solid var(--color-colors-bgoverlay);\n  border-radius: 158px;\n"]);return ty=function(){return e},e}let tk=u.ZP.div.withConfig({componentId:"sc-fe69e2bf-0"})(tx()),tA=u.ZP.div.withConfig({componentId:"sc-fe69e2bf-1"})(tw()),tC=u.ZP.div.withConfig({componentId:"sc-fe69e2bf-2"})(t_()),tZ=u.ZP.div.withConfig({componentId:"sc-fe69e2bf-3"})(tb(),e=>{let{imgUrl:n}=e;return n?"none":"2px dashed var(--color-colors-bgoverlaytop)"},e=>{let{imgUrl:n}=e;return n?"url(".concat(n,")"):"var(--color-colors-bgmain)"},e=>{let{imgUrl:n}=e;return n?"none":"block"}),tj=u.ZP.div.withConfig({componentId:"sc-fe69e2bf-4"})(ty()),tI=a.memo(function(e){let{src:n,loading:t,withBorder:a,className:r,children:l}=e,s=(0,i.jsx)(tZ,{className:o()(r,{loading:t}),imgUrl:n,children:t?(0,i.jsx)(nw.x,{}):l});return a?(0,i.jsx)(tj,{children:s}):s}),tS=e=>{let{customFaces:n,templateFaces:t,openDrawer:r}=e,o=(0,a.useMemo)(()=>t.length>1,[t]),l=(0,a.useMemo)(()=>t.filter(e=>!!e.image).splice(0,2).concat(Array.from({length:2}).fill({image:""})),[t]),s=(0,a.useMemo)(()=>n.filter(e=>!!e.loading||!!e.imgUrl).splice(0,2).concat(Array.from({length:2}).fill({file:null,imgUrl:"",loading:!1})),[n]);return(0,i.jsxs)(tA,{className:"thumbnail-content",onClick:r,children:[o?(0,i.jsxs)(tC,{children:[(0,i.jsx)(tI,{className:"thumb-template-face",src:l[0].image}),(0,i.jsx)(tI,{className:"thumb-template-face",withBorder:!0,src:l[1].image})]}):(0,i.jsx)(tI,{className:"thumb-template-face",src:l[0].image,children:(0,i.jsx)(nH,{width:64,height:65})}),(0,i.jsx)(tk,{className:"arrow-holder",children:(0,i.jsx)(nr,{})}),o?(0,i.jsxs)(tC,{children:[(0,i.jsx)(tI,{className:"thumb-custom-face",loading:s[0].loading,src:s[0].imgUrl,children:(0,i.jsx)(nx.Z,{})}),(0,i.jsx)(tI,{className:"thumb-custom-face",loading:s[1].loading,src:s[1].imgUrl,withBorder:!0,children:(0,i.jsx)(nx.Z,{})})]}):(0,i.jsx)(tI,{className:"thumb-custom-face",loading:s[0].loading,src:s[0].imgUrl,children:(0,i.jsx)(nx.Z,{})})]})};function tE(){let e=(0,c._)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--spacing-small);\n  position: relative;\n  .pica-common-button {\n    padding-left: var(--spacing-normal);\n    padding-right: var(--spacing-normal);\n    height: 7.4vw;\n  }\n  .thumbnail-loading-holder {\n    display: none;\n  }\n  &.recognizing,\n  &.hdDoing {\n    .thumbnail-loading-holder {\n      display: flex;\n    }\n    .thumbnail-content {\n      opacity: 0;\n      width: 0;\n    }\n    .pica-common-button {\n      opacity: 0;\n    }\n  }\n  .download-btn {\n    width: 25vw;\n  }\n"]);return tE=function(){return e},e}function tD(){let e=(0,c._)(["\n  position: absolute;\n  width: 100vw;\n  left: -18.9vw;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: var(--color-colors-contentsoft);\n  font-size: var(--font-caption);\n  font-weight: 400;\n  .circle-loading__container {\n    transform: scale(1.5);\n    position: absolute;\n    right: 10vw;\n  }\n"]);return tD=function(){return e},e}function tT(){let e=(0,c._)([""]);return tT=function(){return e},e}let tP=u.ZP.div.withConfig({componentId:"sc-2feb0216-0"})(tE()),tR=u.ZP.div.withConfig({componentId:"sc-2feb0216-1"})(tD()),tz=u.ZP.div.withConfig({componentId:"sc-2feb0216-2"})(tT()),tF=e=>{let{t:n}=(0,z.Z)("index"),{customFaces:t,singleFaceTriggerUpload:r=ev.Z,openDrawer:o=ev.Z,swap:l=ev.Z,isReadyToSwap:s}=e,{resultManager:c,tmplManager:u,reqStatusCollection:d}=(0,a.useContext)(ef.u);(0,ew.C)(e_.fK);let p=(0,ew.C)(e_.tV),f=(0,a.useMemo)(()=>t.filter(e=>!!e.imgUrl).length,[t]),m=t.length>1,g=(0,i.jsx)(ey.T,{size:"small",className:"add-face-btn",onPress:()=>{m||r(),o()},children:n("add_face")});return f<1&&0===t.filter(e=>!!e.file).length?g:c.result.hasComplete?u.validate.isVideoTemplate?(0,i.jsx)(n4,{size:"small",withoutIcon:!0,btnContent:n("download")}):(0,i.jsx)(n3,{size:"small",withoutIcon:!0,btnContent:n("download")}):d.swapFace.loading?p?(0,i.jsx)(to,{size:"small"}):(0,i.jsx)(tn,{size:"small",inDrawer:!0}):s?(0,i.jsx)(tl,{size:"small",swap:l}):null},tN=(0,a.memo)((0,a.forwardRef)(function(e,n){var t,r;let{t:l}=(0,z.Z)("index"),{tmplManager:s,reqStatusCollection:c}=(0,a.useContext)(ef.u),u=s.upload.recognizing;return(0,i.jsxs)(tP,{className:o()("thumbnail-preset",{recognizing:u,hdDoing:c.hd.loading}),children:[(0,i.jsxs)(tR,{className:"thumbnail-loading-holder",children:[(0,i.jsxs)(tz,{children:[u&&l(eB(null!==(r=null===(t=s.upload.tmpl)||void 0===t?void 0:t.type)&&void 0!==r?r:"")?"recognizing_faces_in_video":"recognizing_faces_in_photo"),c.hd.loading&&l("generating_hd")]}),u||c.hd.loading&&(0,i.jsx)(nw.x,{})]}),(0,i.jsx)(tS,{...e}),(0,i.jsx)(tF,{...e})]})}));function tU(){let e=(0,c._)(["\n  color: var(--color-colors-warncontent);\n"]);return tU=function(){return e},e}function tB(){let e=(0,c._)(["\n  color: var(--color-colors-contentmain);\n  text-decoration: underline;\n  margin: 0 var(--spacing-xsmall);\n  cursor: pointer;\n"]);return tB=function(){return e},e}function tM(){let e=(0,c._)(["\n    position: relative;\n    font-size: var(--font-caption-small);\n    margin-top: 4px;\n  "]);return tM=function(){return e},e}function tV(){let e=(0,c._)(["\n  color: var(--color-colors-contentsoft);\n  position: absolute;\n  bottom: var(--spacing-normal);\n  margin-left: 50%;\n  transform: translateX(-25%);\n  width: 100%;\n  font-size: var(--font-caption);\n  line-height: var(--font-caption-H);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 510;\n  gap: 8px;\n  ","\n  .pica-common-button {\n    margin-left: var(--spacing-normal);\n  }\n"]);return tV=function(){return e},e}let tL=u.ZP.div.withConfig({componentId:"sc-5f26d10e-0"})(tU());u.ZP.span.withConfig({componentId:"sc-5f26d10e-1"})(tB());let tO=u.ZP.div.withConfig({componentId:"sc-5f26d10e-2"})(tV(),d.BC.mobile(tM()));var tH=t(6837),tq=t(52572);function tW(){let e=(0,c._)(["\n  display: flex;\n  width: 32px;\n  height: 32px;\n  z-index: 2;\n  background: transparent;\n"]);return tW=function(){return e},e}function tG(){let e=(0,c._)(["\n  ","\n  &.active {\n    svg {\n      path {\n        stroke: var(--color-colors-warncontent);\n        stroke-opacity: 1;\n      }\n      rect {\n        fill: var(--color-colors-warncontent);\n        fill-opacity: 1;\n      }\n    }\n  }\n"]);return tG=function(){return e},e}function tJ(){let e=(0,c._)(["\n  ","\n  transform: rotate(180deg) scale(-1,1);\n  &.active {\n    svg {\n      path {\n        stroke: var(--color-colors-positivecontent);\n        stroke-opacity: 1;\n      }\n      rect {\n        fill: var(--color-colors-positivecontent);\n        fill-opacity: 1;\n      }\n    }\n  }\n"]);return tJ=function(){return e},e}let tX=(0,u.iv)(tW()),tQ=(0,u.ZP)(ey.k).withConfig({componentId:"sc-367dbb2-0"})(tG(),tX),tK=(0,u.ZP)(ey.k).withConfig({componentId:"sc-367dbb2-1"})(tJ(),tX);var tY=t(90317),t$=t(82448);let t0=e=>{let{feedbackOpt:n,getTipsContainer:t,tipsStyle:r={}}=e,[l,s]=(0,a.useState)(!1),{withResult:c,clickTrack:u,saPublicParams:d}=eZ();return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(tQ,{className:o()("dislike-btn",{active:l}),onPress:e=>{l||(s(!0),c(u)({action:"dislike"}))},icon:(0,i.jsx)(t$.Z,{})}),(0,i.jsx)(tY.p,{options:n,visible:l,saPublicParams:d,tipsPosition:"absolute",getTipsContainer:t,tipsStyle:r})]})},t1=()=>{let[e,n]=(0,a.useState)(!1),{withResult:t,clickTrack:r,saPublicParams:l}=eZ();return(0,i.jsx)(tK,{className:o()("like-btn",{active:e}),onPress:i=>{e||(n(!0),t(r)({action:"like"}))},icon:(0,i.jsx)(t$.Z,{})})},t2=e=>{var n,t,r;let{t:o}=(0,z.Z)("index"),{subscribeCheckerRecusion:l}=(0,ej.Q)(),{isMobile:s}=(0,ts.hU)();(0,ew.C)(e_.fK);let{resultManager:c,tmplManager:u}=(0,a.useContext)(ef.u),{hasError:d,needRetry:p,errorReason:f,isReadyToSwap:m,customFaces:g,feedbackOpt:h,getTipsContainer:v,getFooterRef:x,retry:w}=e,{calcVideoCredit:_}=(0,tH.e)();return((0,em.Z)(()=>{l({isPaid:!1,url:eI.bi,referrer_type:eA.sN.faceswap})}),d)?s?null:p?(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(tL,{children:f}),(0,i.jsx)(ey.T,{onPress:w,size:"small",isNormal:!0,children:o("retry")})]}):(0,i.jsx)(tL,{children:f}):c.result.hasComplete?s?null:(0,i.jsxs)(a.Fragment,{children:[o("like_the_result"),(0,i.jsx)(t0,{feedbackOpt:h,getTipsContainer:v,tipsStyle:{bottom:(null!==(t=null==x?void 0:null===(n=x())||void 0===n?void 0:n.clientHeight)&&void 0!==t?t:40)+20,width:"65%"}}),(0,i.jsx)(t1,{})]}):m&&!c.result.hasComplete?(0,i.jsx)(a.Fragment,{children:o("it_will_cost_credits_",{x:u.validate.isVideoTemplate?_(null===(r=u.current.tmpl)||void 0===r?void 0:r.duration).total:tq.rx*g.filter(e=>e.imgUrl).length})}):null},t5=e=>{let n=(0,a.useRef)(null);return(0,i.jsx)(tO,{ref:n,children:(0,i.jsx)(t2,{...e,getFooterRef:()=>n.current})})};var t3=t(37572),t6=t(24037),t4=t(63697),t8=t(64302);let t7=tq.rx,t9=()=>{let{loading:e,runAsync:n,cancel:t}=(0,t3.Z)({method:"post",url:eI.qB,creditCost:()=>t7},{manual:!0}),i=(0,em.Z)(e=>n(e));return{swapping:e,swapStart:i,swapCancel:t}},ie=e=>{let{loading:n,run:t,cancel:i}=(0,t3.Z)({url:eI.S,method:"post"},{manual:!0,pollingInterval:eU.ME,pollingErrorRetryCount:1,...e}),a=(0,em.Z)(e=>{t({taskIds:[e]})});return{querying:n,queryStart:a,queryCancel:i}},it=e=>{let{subscriptHook:n,errorHook:t=ev.Z}=e,i=(0,ew.C)(e_.fK),{tmplManager:r}=(0,a.useContext)(ef.u),{t:o}=(0,z.Z)("index"),[l,s]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[d,p]=(0,a.useState)(""),{swapping:f,swapStart:m,swapCancel:g}=t9(),{isCreditEnough:h,checking:v}=(0,tH.e)(),{getRemainingCredit:x}=(0,tH.e)(),{clickTrack:w,taskTrack:_,exposureTrack:b}=eZ(),y=(0,a.useRef)({}),k=(0,em.Z)(e=>{var n;y.current={media_type:"image",model_id_list:JSON.stringify({model_id:[r.current.tmplIdx]}),media_url:null===(n=r.current.tmpl)||void 0===n?void 0:n.templateImage,person_count:e.faces.length,person_url:e.faces.map(e=>e.image).join(",")}}),A=0,C=(0,em.Z)(e=>{let n=e[0],{queueStatus:i}=n;if(i===n0.lU.PENDING){s(n.asyncTaskQueueVO);return}if(i===n0.lU.SUCCESS){S();let{generateImage:e,noWatermarkImage:t,upscaleImage:i,taskId:a}=n;u({generateImage:e,noWatermarkImage:t,upscaleImage:i,taskId:a}),b({action:"task_result_finished",position_source:"faceswap_task_result",duration:Math.floor((Date.now()-A)/1e3),task_id_string:a,watermarked:!t,...y.current}),T()}else(i===n0.lU.FAIL||i===n0.lU.EXPIRED)&&(S(),T(),i===n0.lU.EXPIRED?t(o(t8.FC[t8.m6.EXPIRED])):t(o(t8.FC[t8.m6.ERROR])));s(null)}),Z=(0,em.Z)(e=>{t(e.message),s(null),T()}),{queryStart:j,querying:I,queryCancel:S}=ie({onSuccess:C,onError:Z}),{loading:E,reqStart:D,reqEnd:T}=(0,nk.f)(f,I,v),P=(0,em.Z)(e=>{e||w(y.current),u(null),S()}),R=(0,em.Z)(async e=>{D(),k(e),w({action:"create_faceswap_task",position_source:"faceswap_replace_face",...y.current}),_({action:"create_task_start",position_source:"faceswap",...y.current});let a=Date.now();try{let r=tq.rx*e.faces.length;t7=r;let o=await h(r);if(!o)try{n&&await n({bizCode:i?t6.t1:t6.WG,neededCreditCount:r})}catch(e){t("",!0);return}let l=await m(e),{taskId:c,asyncTaskQueueVO:u,code:d}=l;if(d&&(0,t4.wg)(d)){t("",!0);return}x(),s(u),p(e=>(e&&P(!0),A=Date.now(),j(c),_({...y.current,action:"create_task_success",position_source:"faceswap",task_id_string:c,duration:Date.now()-a}),b({action:"task_result_waiting",position_source:"faceswap_task_result",task_id_string:c}),c))}catch(e){T(),x(),t(e.message),console.trace(e),_({...y.current,action:"create_task_failed",position_source:"faceswap",task_id_string:d,duration:Date.now()-a})}}),F=(0,em.Z)(()=>{g(),S(),T()});return{imgSwapFaceStart:R,loading:E,imgSwapFaceCancel:F,taskId:d,result:c,resetResult:P,queueInfo:l,loaddingStatus:{checking:v,querying:I,swapping:f}}},ii=10,ia=()=>{let{loading:e,runAsync:n,cancel:t}=(0,t3.Z)({method:"post",url:eI.fe,creditCost:()=>ii},{manual:!0}),i=(0,em.Z)(e=>n(e));return{swapping:e,swapStart:i,swapCancel:t}},ir=e=>{let{loading:n,run:t,cancel:i}=(0,t3.Z)({url:eI.tW,method:"post"},{manual:!0,pollingInterval:eU.ME,pollingErrorRetryCount:1,...e}),a=(0,em.Z)(e=>{t({taskIds:[e]})});return{querying:n,queryStart:a,queryCancel:i}},io=e=>{let{subscriptHook:n,errorHook:t=ev.Z}=e,i=(0,ew.C)(e_.fK),{tmplManager:r}=(0,a.useContext)(ef.u),{t:o}=(0,z.Z)("index"),[l,s]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[d,p]=(0,a.useState)(""),{swapping:f,swapStart:m,swapCancel:g}=ia(),{isCreditEnough:h,checking:v,calcVideoCredit:x}=(0,tH.e)(),{getRemainingCredit:w}=(0,tH.e)(),{getUserInfo:_}=(0,n9.J)(),{clickTrack:b,taskTrack:y,exposureTrack:k}=eZ(),A=(0,a.useRef)({}),C=(0,em.Z)(e=>{var n;A.current={media_type:"video",model_id_list:JSON.stringify({model_id:[r.current.tmplIdx]}),media_url:null===(n=r.current.tmpl)||void 0===n?void 0:n.videoUrl,person_count:e.multiFaceParam.length,person_url:e.multiFaceParam.map(e=>e.source).join(",")}}),Z=0,j=(0,em.Z)(e=>{let n=e[0],{queueStatus:i}=n;if(i===n0.lU.PENDING){P(),s(n.asyncTaskQueueVO);return}if(i===n0.lU.SUCCESS){D();let{generateGif:e,noWatermarkGif:t,generateVideo:i,noWatermarkVideo:a,videoFaceSwapMeta:r,taskId:o}=n;u({generateGif:e,noWatermarkGif:t,generateVideo:i,noWatermarkVideo:a,videoFaceSwapMeta:r,taskId:o}),k({action:"task_result_finished",position_source:"faceswap_task_result",duration:Math.floor((Date.now()-Z)/1e3),task_id_string:o,...A.current}),_(),R()}else(i===n0.lU.FAIL||i===n0.lU.EXPIRED)&&(D(),R(),i===n0.lU.EXPIRED?t(o(t8.FC[t8.m6.EXPIRED])):t(o(t8.FC[t8.m6.ERROR])));s(null)}),I=(0,em.Z)(e=>{t(e.message),s(null),R()}),{queryStart:S,querying:E,queryCancel:D}=ir({onSuccess:j,onError:I}),{loading:T,reqStart:P,reqEnd:R}=(0,nk.f)(f,E,v),F=(0,em.Z)(e=>{e||b({action:"back_btn",task_id_string:d,task_status:"processing",position_source:"faceswap_task_result"}),u(null),D()}),N=(0,em.Z)(async e=>{P(),C(e),b({action:"create_faceswap_task",position_source:"faceswap_replace_face",...A.current}),y({action:"create_task_start",position_source:"faceswap",...A.current});let a=Date.now();try{let r=x(e.duration).total;ii=r;let o=await h(r);if(!o)try{n&&await n({bizCode:i?t6.t1:t6.WG,neededCreditCount:r})}catch(e){t("",!0);return}let{file:l,videoUrl:c,...u}=e,d=await m({...u,videoUrl:c}),{taskId:f,asyncTaskQueueVO:g,code:v}=d;if(v&&(0,t4.wg)(v)){t("",!0);return}s(g),w(),p(e=>(e&&F(!0),Z=Date.now(),S(f),y({...A.current,action:"create_task_success",position_source:"faceswap",task_id_string:f,duration:Date.now()-a}),k({action:"task_result_waiting",position_source:"faceswap_task_result",task_id_string:f}),f))}catch(e){R(),t(e.message),w(),console.trace(e),y({...A.current,action:"create_task_failed",position_source:"faceswap",task_id_string:d,duration:Date.now()-a})}}),U=(0,em.Z)(()=>{g(),D(),R()});return{videoSwapFaceStart:N,loading:T,videoSwapFaceCancel:U,taskId:d,result:c,resetResult:F,queueInfo:l,loaddingStatus:{checking:v,querying:E,swapping:f}}},il=e=>{let{errorHook:n}=e,{tmplManager:t,resultManager:i,reqStatusCollection:r}=(0,a.useContext)(ef.u),{result:o,loading:l,queueInfo:s,taskId:c,imgSwapFaceStart:u,imgSwapFaceCancel:d}=it({errorHook:n,subscriptHook:t4.ZP}),{result:p,loading:f,queueInfo:m,taskId:g,videoSwapFaceStart:h,videoSwapFaceCancel:v}=io({errorHook:n,subscriptHook:t4.ZP}),x=(0,a.useMemo)(()=>t.validate.isVideoTemplate?h:u,[t.current.tmpl]),w=(0,a.useMemo)(()=>t.validate.isVideoTemplate?v:d,[t.current.tmpl]);return(0,a.useEffect)(()=>{r.swapFace.setLoading(l||f),r.swapFace.setCancel(()=>w)},[l,f]),(0,a.useEffect)(()=>{i.queueInfo.set(s),r.swapFace.setQuerying(!!s)},[s]),(0,a.useEffect)(()=>{i.queueInfo.set(m),r.swapFace.setQuerying(!!m)},[m]),(0,a.useEffect)(()=>{i.taskId.set(c)},[c]),(0,a.useEffect)(()=>{i.taskId.set(g)},[g]),(0,a.useEffect)(()=>{i.result.set(o)},[o]),(0,a.useEffect)(()=>{i.result.set(p)},[p]),(0,a.useEffect)(()=>{i.result.set(null)},[t.current.tmplIdx,t.upload.tmpl]),{startSwapFace:x}},is=()=>{let{loading:e,runAsync:n,cancel:t}=(0,t3.Z)({method:"post",url:eI.sF},{manual:!0}),i=(0,em.Z)(e=>n(e));return{hdDoing:e,hdStart:i,hdCancel:t}},ic=e=>{let n=(0,nb.R)(eI.Qy,"post"),{loading:t,run:i,cancel:a}=(0,ny.Z)(n,{manual:!0,pollingInterval:eU.ME,pollingErrorRetryCount:1,...e}),r=(0,em.Z)(e=>{i({taskIds:[e]})});return{querying:t,queryStart:r,queryCancel:a}},iu=e=>{let{errorHook:n=ev.Z}=e,{t}=(0,z.Z)("index"),[i,r]=(0,a.useState)(null),[o,l]=(0,a.useState)(null),[s,c]=(0,a.useState)(""),{hdDoing:u,hdStart:d,hdCancel:p}=is(),{getRemainingCredit:f}=(0,tH.e)(),m=(0,em.Z)(e=>{let i=e[0],{queueStatus:a}=i;if(a===n0.lU.PENDING){r(i.asyncTaskQueueVO);return}if(a===n0.lU.SUCCESS){x();let{generateImage:e,noWatermarkImage:n,upscaleImage:t}=i;l({generateImage:e,noWatermarkImage:n,upscaleImage:t}),b()}else(a===n0.lU.FAIL||a===n0.lU.EXPIRED)&&(x(),b(),a===n0.lU.EXPIRED?n(t(t8.FC[t8.m6.EXPIRED])):n(t(t8.FC[t8.m6.ERROR])));r(null)}),g=(0,em.Z)(e=>{n(e.message),r(null),b()}),{queryStart:h,querying:v,queryCancel:x}=ic({onSuccess:m,onError:g}),{loading:w,reqStart:_,reqEnd:b}=(0,nk.f)(u,v),y=(0,em.Z)(()=>{l(null),x()}),k=(0,em.Z)(async e=>{_();try{let n=await d(e),{taskId:t,asyncTaskQueueVO:i,code:a}=n;if(a&&(0,t4.wg)(a)){b();return}f(),r(i),c(e=>(e&&y(),t&&h(t),t))}catch(e){b(),f(),console.trace(e)}}),A=(0,em.Z)(()=>{p(),x(),b()});return{hdSwapFaceStart:k,loading:w,hdSwapFaceCancel:A,taskId:s,result:o,resetResult:y,queueInfo:i,loaddingStatus:{querying:v,hdDoing:u}}},id=e=>{let{errorHook:n}=e,{resultManager:t,reqStatusCollection:i}=(0,a.useContext)(ef.u),{result:r,queueInfo:o,loading:l,taskId:s,hdSwapFaceStart:c,hdSwapFaceCancel:u}=iu({errorHook:n}),d=(0,em.Z)(()=>{if(t.result.value){var e;c({taskId:null===(e=t.result.value)||void 0===e?void 0:e.taskId})}});return(0,a.useEffect)(()=>{r&&t.result.set(e=>({...e,...r}))},[r]),(0,a.useEffect)(()=>{t.queueInfo.set(o)},[o]),(0,a.useEffect)(()=>{t.taskId.set(s)},[s]),(0,a.useEffect)(()=>{i.hd.setLoading(l),i.hd.setCancel(()=>u)},[l]),{startHDResult:d}};var ip=t(66141);let im=(0,a.forwardRef)(function(e,n){var t;let{t:r}=(0,z.Z)("index"),{uiControl:l,tmplManager:s,resultManager:c,reqStatusCollection:u,drawerHeight:d,hasBeenInteract:p,setInteractStauts:f,setAdaptDrawerHeight:m,isMobileStyle:g}=(0,a.useContext)(ef.u),{customFaces:h,templateFaces:v,getSwapFacesParams:x,isReadyToSwap:w,hasFaceToShow:_,isMultipleFace:b,hasUnReadyUploadFile:y,setCustomFace:k}=tp(),A=(0,ew.C)(e_.fK),C=c.result.hasComplete,Z=(0,a.useRef)(null),j=(0,a.useRef)(null),I=(0,a.useRef)(null),S=(0,a.useRef)(null),E=(0,em.Z)(()=>null==j?void 0:j.current),{exposureTrack:D,clickTrack:T,withResult:P}=eZ(),R=(0,ip.bS)(),F=(0,ip.vN)(),N=null===(t=s.current.tmpl)||void 0===t?void 0:t.videoUrl,{hasError:U,needRetry:B,errorReason:M,toastProps:V,callNotSupportFileType:L,callMaxSizeExceeded:O,callNoFaceRecognized:H,callCommonUploadError:q,callCommonSwapFaceError:W,retry:G}=tc({getContainer:E}),{clearError:J}=nF(),{startSwapFace:X}=il({errorHook:W}),{startHDResult:Q}=id({errorHook:W}),{dropProps:K,isDropTarget:Y}=(0,eL.L)({ref:Z,async onDrop(e){let n=e.items.find(e=>"file"===e.kind&&(0,eh.Or)(e.type));n?k(0,await n.getFile(),""):L()},isDisabled:!_||_&&b}),$=(0,em.Z)(async()=>{X(await x())}),ee=(0,em.Z)(async()=>{Q(),P(T)({action:"high_resoluton"})}),en=(0,em.Z)(()=>{var e;null===(e=I.current)||void 0===e||e.open()}),et=(0,em.Z)(()=>{var e,n;(!l.drawerScroll.isLock||!p)&&(null===(e=I.current)||void 0===e?void 0:e.isOpen)&&(null===(n=I.current)||void 0===n||n.close())}),ei=(0,em.Z)(e=>{T({action:e?"expand_peoson_selector_panel":"collapse_peoson_selector_panel"})}),ea=(0,a.useMemo)(()=>{if(p){if(!b||C)return d;if(w)return;return d}if(!w)return d},[p,w,b,C,d]);(0,a.useImperativeHandle)(n,()=>({callNotSupportFileType:L,callMaxSizeExceeded:O})),(0,a.useEffect)(()=>{var e;s.upload.tmpl||J(),!s.upload.tmpl||(null===(e=s.upload.tmpl)||void 0===e?void 0:e.ready)||J()},[s.upload.tmpl]),(0,a.useEffect)(()=>{J()},[s.current.tmplIdx]);let er=(0,no.Z)(s.current.tmpl);(0,a.useEffect)(()=>{I.current&&er&&(I.current.forceUpdate(),I.current.open())},[s.current.tmplIdx,s.upload.tmpl]),(0,a.useEffect)(()=>(g&&ea&&+ea>0&&setTimeout(()=>{document.addEventListener("scroll",et)},1e3),()=>{document.removeEventListener("scroll",et)}),[g,ea]),(0,a.useEffect)(()=>{m(!0)},[w]),(0,a.useEffect)(()=>{setTimeout(()=>{D({action:"faceswap"})},500)},[]);let eo=(0,a.useMemo)(()=>g&&b&&C?(0,i.jsx)(nt,{onClick:()=>{c.result.set(null)},children:(0,i.jsx)(tS,{customFaces:h,templateFaces:v})}):(0,i.jsx)(nn,{className:o()("",{multiple:b,loading:u.swapFace.loading||u.hd.loading}),children:h.map((e,n)=>(0,i.jsxs)(ne,{className:o()("single-container"),children:[(0,i.jsx)(nq,{index:n,face:v[n]}),(0,i.jsx)(ni,{className:"arrow-holder",children:(0,i.jsx)(nr,{})}),(0,i.jsx)(nN,{ref:0===n?S:null,index:n,face:e,setFace:k,notSupportCallback:L,noFaceRecognizedCallback:H,commonErrorCallback:q,isDropActive:Y})]},n))}),[v,h,b,Y,C,u.swapFace.loading]),el=(0,i.jsx)(nY,{$downloadImg:(0,i.jsx)(n3,{}),$downloadGif:(0,i.jsx)(n6,{}),$downloadMP4:(0,i.jsx)(n4,{btnContent:!A&&s.validate.isVideoTemplate?r("download"):void 0}),$hdSwapFaceResult:(0,i.jsx)(n7,{hdSwap:ee}),$notifyme:(0,i.jsx)(tn,{}),$speedUp:(0,i.jsx)(to,{}),$removeWatermark:(0,i.jsx)(tr,{}),$swap:(0,i.jsx)(tl,{swap:$}),isReadyToSwap:w}),es=(0,em.Z)(()=>s.upload.recognizing?(0,i.jsx)(tv,{}):(0,i.jsxs)(a.Fragment,{children:[!g&&(0,i.jsx)(e8,{...K,ref:Z}),(0,i.jsxs)(e7,{ref:j,id:"operator-container",className:o()("operator-container",{multiple:b}),children:[(0,i.jsx)(e9,{className:o()("operator-title",{loading:u.swapFace.loading||u.hd.loading,hasComplete:C}),children:C?r("face_swap_completed"):r("add_your_face_to_swap")}),eo,el]}),(0,i.jsx)(t5,{hasError:U,needRetry:B,errorReason:M,isReadyToSwap:w,customFaces:h,retry:G,feedbackOpt:N?F:R,getTipsContainer:()=>j.current}),(0,i.jsx)(nl.FN,{...V})]})),ec=es(),eu=(()=>{if(g){var e;let n=!p,t=(0,i.jsx)(tN,{customFaces:h,templateFaces:v,singleFaceTriggerUpload:null===(e=S.current)||void 0===e?void 0:e.uploadClick,openDrawer:en,swap:$,isReadyToSwap:w});return(0,i.jsx)(na,{className:o()("",{"not-been-interact":n&&!w,hide:0===ea}),UNSAFEAutoRePosition:!0,initWithOpen:!0,ref:I,allowScroll:!0,maskClassName:"swap-face-foot-drawer-mask",defaultSlot:t,expandSlot:ec,expandSlotStyle:{height:ea},onOpenChange:ei})}})();return _?(0,i.jsxs)(i.Fragment,{children:[!g&&ec,g&&eu]}):null}),ig=e=>{let{uiControl:n,tmplManager:t,leftRef:i,swapFaceContainerRef:r}=e,o=(0,eP.D)(t.current.tmpl,null),l=(0,eP.D)(t.current.tmplIdx,0),[s,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(0),p=(0,eP.D)(u,0),[f,m]=(0,a.useState)(!1),[g,h]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1),[w,_]=(0,a.useState)(void 0),{isMobileStyle:b}=(0,nK.S)(),y=(0,em.Z)(()=>{let e=document.querySelector("#pica-header").clientHeight;return e}),k=(0,em.Z)(()=>r.current?g?window.innerHeight-y()-5-r.current.clientHeight:window.innerHeight-r.current.clientHeight-r.current.offsetTop-4.267*window.innerWidth*.01:0),A=(0,em.Z)(()=>{let e=document.querySelector("#operator-container");if(!e)return 0;let n=Array.from(e.children).reduce((e,n)=>e+=n.clientHeight,0);return n+4.267*window.innerWidth*.01}),C=(0,em.Z)(e=>{if(!b)return;let n=document.querySelector("#operator-container");if(!n)return;let t=k(),i=A();if(g){if(t<i){if(!e&&p&&p-i>40){d(p);return}d(Math.max(t,i));return}d(t)}else d(Math.max(t,i))}),Z=(0,em.Z)(()=>{if(b)i.current&&(n.drawerScroll.lock(),function(e,n,t){let i=e.toFixed(),a=Date.now(),r=function(){if(window.scrollY.toFixed()===i){window.removeEventListener("scroll",r);let e=Date.now()-a;t&&e<t?setTimeout(()=>{n()},t-e):n()}};window.addEventListener("scroll",r),r(),window.scrollTo({top:e,behavior:"smooth"})}(i.current.offsetTop-y(),()=>{n.drawerScroll.unlock()},1e3),h(!0));else{if(!r.current)return;r.current.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}}),j=(0,em.Z)(e=>{if(e){_(void 0);return}if(b){if(!r.current)return;let e=r.current.querySelector(".img-previewer")||r.current.querySelector(".video-previewer");_({height:null==e?void 0:e.clientHeight})}}),I=(0,em.Z)(e=>{x(()=>(j(e.horizontal),e.horizontal)),setTimeout(()=>{C()},500)});return(0,a.useEffect)(()=>{i.current&&r.current&&o&&Z()},[t.upload.tmpl]),(0,a.useEffect)(()=>{C()},[g]),(0,a.useEffect)(()=>{if(null===o&&t.current.tmpl){if(f)return;m(!0)}if(f&&t.current.tmpl){let{width:e,height:n}=t.current.tmpl;x(e/n>1)}},[t.current.tmpl]),(0,a.useEffect)(()=>{0===l&&f&&!g&&h(!0)},[t.current.tmplIdx]),{drawerHeight:u,hasBeenInteract:g,focusTemplatePreview:Z,onTemplateLoadEffect:I,horizontal:v,fallbackStyle:w,setAdaptDrawerHeight:C,isFocusToSwap:s,setFocusToSwap:c,isMobileStyle:b,setInteractStauts:h}},ih=()=>{let[e,n]=(0,a.useState)(!1),[t,i]=(0,a.useState)(!1),[r,o]=(0,a.useState)(()=>ev.Z),[l,s]=(0,a.useState)(!1),[c,u]=(0,a.useState)(()=>ev.Z),[d,p]=(0,a.useState)(!1),[f,m]=(0,a.useState)(()=>ev.Z),[g,h]=(0,a.useState)(!1),[v,x]=(0,a.useState)(()=>ev.Z);return{swapFace:{loading:e,querying:t,setLoading:n,setQuerying:i,setCancel:o},hd:{loading:l,setLoading:s,setCancel:u},watermark:{loading:d,setLoading:p,setCancel:m},download:{loading:g,setLoading:h},cancelAll:()=>{r(),c(),f(),v()}}};var iv=t(82274);let ix=()=>{let e=(0,nb.R)(eI.W9),{data:n,loading:t,loadMore:i,loadingMore:a,noMore:r}=(0,iv.Z)(n=>e({pageNumber:n?n.pageNumber+1:0,pageSize:14}),{isNoMore:e=>!(null==e?void 0:e.hasNext)});return{data:n,templateList:(null==n?void 0:n.list)||[],loading:t,loadMore:i,loadingMore:a,noMore:r}},iw=e=>{let{reqStatusCollection:n}=(0,a.useContext)(ef.u),{t}=(0,z.Z)("index"),{setError:i}=nF(),{setCurrentTemplate:r,setPreUploadTemplate:o}=e,l=(0,em.Z)(()=>{r(tu),i({content:t("no_face_recognized_")}),o(e=>e?{...e,ready:!0}:e)}),s=(0,em.Z)(()=>{i({content:t("network_error_please_retry_"),needRetry:!0})}),c=(0,em.Z)(e=>{r(tu),i({content:e}),o(e=>e?{...e,ready:!0}:e)}),{loading:u,recognizeCustomImgTemplate:d,recognizeCustomVideoTemplate:p,cancel:f}=nE({noFaceRecognizedCallback:l,commonErrorCallback:s,NSFWErrorCallback:c});return{recognizeCustomImgTemplate:d,recognizeCustomVideoTemplate:p,cancelRecognize:f,noFaceRecognizedCallback:l,recognizedCommonErrorCallback:s,recognizing:u}};var i_=t(44794);let ib=()=>{let{templateList:e,loadMore:n,loadingMore:t,noMore:i}=ix(),{setRetry:r}=nF(),[o,l]=(0,a.useState)(null),[s,c]=(0,a.useState)(-1),[u,d]=(0,a.useState)(null),{recognizeCustomImgTemplate:p,recognizeCustomVideoTemplate:f,cancelRecognize:m,recognizing:g}=iw({setCurrentTemplate:l,setPreUploadTemplate:d}),h=(0,a.useMemo)(()=>u?eB(u.type):!!o&&!!o.videoUrl,[u,o]),v=(0,em.Z)(()=>{d(null)});return(0,a.useEffect)(()=>{(0,i_.LF)({paymentMetadata:{media_type:h?"video":"image"},operation:"update"})},[h]),(0,a.useEffect)(()=>{async function e(){if(m(),u&&!u.ready){let e;let{file:n,externalUrl:t,type:i}=u;if(!n&&!t)return;let a=eB(i);(e=a?await f(n):await p(null!=n?n:t))&&e.faces&&(l({...tu,faces:e.faces,...a?{videoUrl:e.videoUrl,videoCoverUrls:e.imageUrls,duration:e.duration,type:"VIDEO"}:{templateImage:e.imageUrl}}),d({...u,ready:!0}))}}u&&(r(e),e())},[u]),(0,a.useEffect)(()=>{s>=0&&(u||m(),l(e[s]))},[s]),{templateList:{loadMore:n,loadingMore:t,noMore:i,list:e},current:{tmpl:o,tmplIdx:s,setTmpl:l,setIdx:c},upload:{tmpl:u,clear:v,setTmpl:d,recognizing:g},validate:{isVideoTemplate:h}}},iy=()=>{let[e,n]=(0,a.useState)(null),[t,i]=(0,a.useState)(null),[r,o]=(0,a.useState)("");return{result:{set:n,value:e,hasComplete:!!e},queueInfo:{set:i,value:t},taskId:{set:o,value:r},reset:()=>{n(null),i(null),o("")}}};var ik=t(99157);let iA=e=>{let{reqStatusCollection:n,tmplManager:t,refManager:i}=e,r=(0,ik.useRouter)(),{i:o}=r.query,{dropProps:l,isDropTarget:s}=(0,eL.L)({ref:i.left,async onDrop(e){var n,a,r,o;let l=e.items.find(e=>"file"===e.kind&&((0,eh.Or)(e.type)||eB(e.type)));if(l){let e=await l.getFile();if(e.size>eU.Tb){null===(n=i.operator)||void 0===n||null===(a=n.current)||void 0===a||a.callMaxSizeExceeded();return}t.upload.setTmpl({file:e,type:l.type,ready:!1})}else null===(r=i.operator)||void 0===r||null===(o=r.current)||void 0===o||o.callNotSupportFileType()},isDisabled:n.swapFace.loading||n.hd.loading});return(0,a.useEffect)(()=>{o&&(t.upload.setTmpl({externalUrl:o,type:(null==o?void 0:o.includes("mp4"))?"video/mp4":"image/jpeg",ready:!1}),window.history.replaceState(null,"",r.pathname))},[o]),{dropProps:l,isDropToLeftArea:s}},iC=()=>{let e=(0,a.useRef)(null),n=(0,a.useRef)(null),t=(0,a.useRef)(null),i=(0,a.useRef)(null),r=(0,a.useRef)(null),o=(0,a.useRef)(null);return{main:e,swapFaceContainer:n,left:t,tmplSelector:i,right:r,operator:o}},iZ=()=>{let[e,n]=(0,a.useState)(!0),t=(0,em.Z)(e=>{n(e)});return{drawerScroll:{lock:()=>t(!0),unlock:()=>t(!1),isLock:e}}};var ij=t(2648),iI=t(9488),iS=t(98954),iE=t.n(iS),iD=t(71878),iT=e=>{let{currentDiffImageData:n}=e;return(0,i.jsx)(i.Fragment,{children:n.map((e,n)=>(0,i.jsx)(iI.Z,{onButtonPress:()=>{(0,iD.k3)()},title:e.title,description:e.description,buttonContent:e.buttonContent,reverse:n%2==1,showCaseContent:(0,i.jsx)(iE(),{style:{width:"100%",height:"auto",borderRadius:"var(--spacing-normal)"},width:e.data.width,height:e.data.height,src:e.data,alt:"heashot card image"})},e.data.src))})},iP=t(88239),iR=t(37017);function iz(){let e=(0,c._)(["\n    flex-direction: column;\n  "]);return iz=function(){return e},e}function iF(){let e=(0,c._)(["\n  display: flex;\n  gap: 26px;\n\n  .rate-card-container {\n    border: none;\n    background: var(--color-colors-bgoverlay);\n  }\n\n  ","\n"]);return iF=function(){return e},e}let iN=u.ZP.div.withConfig({componentId:"sc-b2939fc8-0"})(iF(),d.BC.mobile(iz()));var iU=e=>{let{picaPricePageReviewConfig:n}=e,{t:a}=(0,z.Z)("index");return(0,i.jsx)(iP.Z,{title:a("faceswap-review h2"),children:(0,i.jsx)(iN,{children:n.map(e=>(0,i.jsx)(iR.Z,{title:e.title,content:e.content,src:t(14239)("./avatar-".concat(e.id,".webp"))},e.id))})})},iB=t(38057),iM=t(36566),iV=t(42613),iL=t.n(iV),iO=e=>{let{isHomePage:n}=e,{t:r}=(0,z.Z)("index"),o=n?"index":"faceswap",l=(0,a.useRef)({title:r("".concat(o,"-seo title")),desc:r("".concat(o,"-meta desc")),stepTitle:r("".concat(o,"-step h2")),buttonText:r("".concat(o,"-button1")),step1Number:r("".concat(o,"-step1N")),step1Title:r("".concat(o,"-step1")),step1SubTitle:r("".concat(o,"-step1 desc")),step2Number:r("".concat(o,"-step2N")),step2Title:r("".concat(o,"-step2")),step2SubTitle:r("".concat(o,"-step2 desc")),step3Number:r("".concat(o,"-step3N")),step3Title:r("".concat(o,"-step3")),step3SubTitle:r("".concat(o,"-step3 desc")),faqTitle:r("".concat(o,"-faq h2")),faqDescription:r("".concat(o,"-faq h2 desc")),q1:r("".concat(o,"-q1")),a1:r("".concat(o,"-a1")),q2:r("".concat(o,"-q2")),a2:r("".concat(o,"-a2")),q3:r("".concat(o,"-q3")),a3:r("".concat(o,"-a3")),q4:r("".concat(o,"-q4")),a4:r("".concat(o,"-a4")),q5:r("".concat(o,"-q5")),a5:r("".concat(o,"-a5")),footerTitle:r("".concat(o,"-cta title")),footerDesc:r("".concat(o,"-cta desc")),footerButton:r("".concat(o,"-button1")),currentDiffImageDataTitle1:r("".concat(o,"-feature1 h2")),currentDiffImageDataDescription1:r("".concat(o,"-feature1 desc")),currentDiffImageDataButtonContent:r("".concat(o,"-button1")),currentDiffImageDataTitle2:r("".concat(o,"-feature2 h2")),currentDiffImageDataDescription2:r("".concat(o,"-feature2 desc")),currentDiffImageDataTitle3:r("".concat(o,"-feature3 h2")),currentDiffImageDataDescription3:r("".concat(o,"-feature3 desc"))}),s=(0,a.useMemo)(()=>[{title:l.current.currentDiffImageDataTitle1,description:l.current.currentDiffImageDataDescription1,buttonContent:l.current.currentDiffImageDataButtonContent,data:{width:960,height:960,src:t(13801).Z.src}},{title:l.current.currentDiffImageDataTitle2,description:l.current.currentDiffImageDataDescription2,buttonContent:l.current.currentDiffImageDataButtonContent,data:{width:960,height:960,src:t(19426).Z.src}},{title:l.current.currentDiffImageDataTitle3,description:l.current.currentDiffImageDataDescription3,buttonContent:l.current.currentDiffImageDataButtonContent,data:{width:960,height:960,src:t(60811).Z.src}}],[]),c=(0,a.useMemo)(()=>[{id:2,title:n?"".concat(r("index-review1")).concat(r("index-review1 name")):"".concat(r("faceswap-review1 name")," - ").concat(r("faceswap-review1 job")),content:n?r("index-review1 job"):r("faceswap-review1")},{id:1,title:n?"".concat(r("index-review2")).concat(r("index-review2 name")):"".concat(r("faceswap-review2 name")," - ").concat(r("faceswap-review2 job")),content:n?r("index-review2 job"):r("faceswap-review2")},{id:3,title:n?"".concat(r("index-review3")).concat(r("index-review3 name")):"".concat(r("faceswap-review3 name")," - ").concat(r("faceswap-review3 job")),content:n?r("index-review3 job"):r("faceswap-review3")}],[]),u=(0,a.useMemo)(()=>[{title:"".concat(l.current.step1Number," ").concat(l.current.step1Title),description:l.current.step1SubTitle,imageSrc:t(95929).Z.src},{title:"".concat(l.current.step2Number," ").concat(l.current.step2Title),description:l.current.step2SubTitle,imageSrc:t(73963).Z.src},{title:"".concat(l.current.step3Number," ").concat(l.current.step3Title),description:l.current.step3SubTitle,imageSrc:t(99651).Z.src}],[]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)(iL(),{children:[(0,i.jsx)("title",{children:l.current.title}),(0,i.jsx)("meta",{name:"description",content:l.current.desc})]}),(0,i.jsx)(ij.Z,{onButtonPress:iD.k3,stepsConfigList:u,title:l.current.stepTitle,buttonText:l.current.buttonText}),(0,i.jsx)(iT,{currentDiffImageData:s}),(0,i.jsx)(iU,{picaPricePageReviewConfig:c}),(0,i.jsx)(iB.Z,{title:l.current.faqTitle,description:l.current.faqDescription,accordionList:[,,,,,].fill(1).map((e,n)=>({header:l.current["q".concat(n+1)],content:l.current["a".concat(n+1)]}))}),(0,i.jsx)(iM.Z,{onButtonPress:iD.k3,title:l.current.footerTitle,description:l.current.footerDesc,buttonTitle:l.current.footerButton})]})};let iH=s()(()=>Promise.all([t.e(2695),t.e(2294)]).then(t.bind(t,92294)),{loadableGenerated:{webpack:()=>[92294]},ssr:!1}),iq=e=>{let{isHomePage:n}=e,{t}=(0,z.Z)("index"),a=iC(),r=ih(),l=ib(),s=iy(),c=iZ(),{horizontal:u,isFocusToSwap:d,drawerHeight:p,hasBeenInteract:f,setInteractStauts:m,fallbackStyle:g,setAdaptDrawerHeight:h,onTemplateLoadEffect:v,setFocusToSwap:x,focusTemplatePreview:w,isMobileStyle:_}=ig({uiControl:c,tmplManager:l,leftRef:a.left,swapFaceContainerRef:a.swapFaceContainer}),{dropProps:b,isDropToLeftArea:y}=iA({refManager:a,tmplManager:l,reqStatusCollection:r});return(0,i.jsx)(ef.u.Provider,{value:{uiControl:c,refManager:a,tmplManager:l,resultManager:s,reqStatusCollection:r,isFocusToSwap:d,horizontal:u,drawerHeight:p,hasBeenInteract:f,setInteractStauts:m,setFocusToSwap:x,focusTemplatePreview:w,setAdaptDrawerHeight:h,onTemplateLoadEffect:v,isMobileStyle:_},children:(0,i.jsxs)(j,{ref:a.main,children:[(0,i.jsx)(R.A,{}),(0,i.jsx)(I,{children:t("faceswap-h1")}),(0,i.jsx)(E,{children:t("faceswap-h1 desc")}),(0,i.jsxs)(D,{ref:a.swapFaceContainer,style:g,children:[(0,i.jsxs)(T,{...b,ref:a.left,className:o()("left-area",{horizontal:u}),children:[(0,i.jsx)(eV,{isDrop:y,ref:a.tmplSelector}),(0,i.jsx)(eR,{isDrop:y})]}),(0,i.jsx)(P,{ref:a.right,children:(0,i.jsx)(im,{ref:a.operator})})]}),(0,i.jsx)(S,{children:t("experience_face_swapping_with_various_templates")}),(0,i.jsx)(iH,{}),(0,i.jsx)(iO,{isHomePage:n})]})})};var iW=e=>{let{isHomePage:n}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(iq,{isHomePage:n})})}},2648:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var i=t(18421);t(98607);var a=t(54268),r=t.n(a),o=t(60532),l=t(11202),s=t(88473),c=t(13404),u=t(36512);function d(){let e=(0,s._)(["\n  width: 100%;\n  margin-top: var(--spacing-large);\n  box-sizing: border-box;\n  padding: var(--spacing-large) var(--spacing-normal);\n  display: flex;\n  justify-content: center;\n  background: var(--color-colors-bgoverlay);\n  &.keep-card-on-mobile {\n    .step-item {\n      flex-direction: column;\n      border-radius: var(--spacing-normal);\n      .pica-seo-steps-image {\n        max-width: 100%;\n        max-height: unset;\n        width: 100%;\n        object-fit: cover;\n        aspect-ratio: 1 / 1;\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){let e=(0,s._)(["\n  display: flex;\n  max-width: 1280px;\n  align-items: center;\n  flex-direction: column;\n  gap: var(--spacing-large);\n\n  .seo-steps-button {\n    width: 280px;\n    height: 56px;\n  }\n"]);return p=function(){return e},e}function f(){let e=(0,s._)(["\n    flex-direction: column;\n  "]);return f=function(){return e},e}function m(){let e=(0,s._)(["\n  display: flex;\n  gap: var(--spacing-medium);\n\n  ","\n"]);return m=function(){return e},e}function g(){let e=(0,s._)(["\n    flex-direction: row;\n    gap: var(--spacing-normal);\n\n      .pica-seo-steps-image {\n        max-width: 90px;\n        max-height: 90px;\n        aspect-ratio: 1 / 1;\n      }\n  "]);return g=function(){return e},e}function h(){let e=(0,s._)(["\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-small);\n  flex: 1;\n  .pica-seo-steps-image {\n    max-width: 400px;\n    width: 30vw;\n    height: auto;\n    border-radius: var(--spacing-normal);\n  }\n\n  ","\n"]);return h=function(){return e},e}function v(){let e=(0,s._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]);return v=function(){return e},e}let x=c.ZP.div.withConfig({componentId:"sc-9870895d-0"})(d()),w=c.ZP.div.withConfig({componentId:"sc-9870895d-1"})(p()),_=c.ZP.div.withConfig({componentId:"sc-9870895d-2"})(m(),u.BC.mobile(f())),b=c.ZP.div.withConfig({componentId:"sc-9870895d-3"})(h(),u.BC.mobile(g())),y=c.ZP.div.withConfig({componentId:"sc-9870895d-4"})(v());var k=t(74456),A=t(98954),C=t.n(A),Z=t(85145),j=e=>{let{title:n,description:t,stepsConfigList:a,buttonText:s,onButtonPress:c,isButtonLoading:u=!1,className:d,isArtguru:p=!1,keepCardOnMobile:f=!1}=e,{Title:m,Text:g}=l.default,h=p?Z.jl:k.T;return(0,i.jsx)(x,{className:r()(d,{"keep-card-on-mobile":f}),children:(0,i.jsxs)(w,{children:[(0,i.jsx)(o.Z,{title:n,description:t}),(0,i.jsx)(_,{children:a.map((e,n)=>(0,i.jsxs)(b,{className:"step-item",children:[(0,i.jsx)(C(),{className:"pica-seo-steps-image",width:647,height:524,alt:"Step ".concat(n+1),src:e.imageSrc}),(0,i.jsxs)(y,{className:"step-item-title-wrapper",children:[(0,i.jsx)(m,{style:{textAlign:"left"},children:e.title}),(0,i.jsx)(g,{style:{textAlign:"left"},color:"var(--color-colors-contentsoft)",type:"body",children:e.description})]})]},n))}),(0,i.jsx)(h,{isLoading:u,onPress:c,className:"seo-steps-button",children:s})]})})}},75274:function(e,n,t){"use strict";t.d(n,{Th:function(){return B},GZ:function(){return L},JY:function(){return z},NZ:function(){return F},cU:function(){return U},mm:function(){return N},zr:function(){return P},qm:function(){return T},dx:function(){return R},IV:function(){return M},u1:function(){return V}});var i=t(88473),a=t(13404),r=t(36512),o=t(3465),l=t(18421);function s(){let e=(0,i._)(["\n  transition: all 0.3s;\n"]);return s=function(){return e},e}function c(){let e=(0,i._)(["\n    width: 17vw;\n    min-width: auto;\n    &.horizontal {\n      width: 100%;\n      height: 18vw;\n      ","\n      &.minimize {\n        height: 11vw;\n      }\n    }\n  "]);return c=function(){return e},e}function u(){let e=(0,i._)(["\n  position: relative;\n  min-width: 128px;\n  width: 129px;\n  height: 100%;\n  border-radius: var(--spacing-normal);\n  /* border-bottom-left-radius: var(--spacing-normal);\n  border-bottom-right-radius: var(--spacing-normal); */\n  overflow-y: scroll;\n  ","\n  ::-webkit-scrollbar {\n    display: none;\n  }\n  &.busying {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n"]);return u=function(){return e},e}function d(){let e=(0,i._)(["\n    .pica-icon-button {\n      background: var(--color-colors-bgoverlay);\n      width: 10.67vw;\n      height: 10.67vw;\n      margin-top: var(--spacing-small);\n      opacity: 0;\n      svg {\n        transform: scale(1.3);\n      }\n    }\n    &.horizontal {\n      display: flex;\n      .pica-icon-button{\n        display: flex;\n        position: absolute;\n        margin-top: 0;\n        transform: rotate(-90deg);\n        left: 14vw;\n      }\n      .upload-btn-container {\n        margin-right: var(--spacing-small);\n      }\n    }\n    &.minimize {\n      .pica-icon-button {\n        display: flex;\n        opacity: 1;\n        transition-delay: .3s;\n      }\n    }\n  "]);return d=function(){return e},e}function p(){let e=(0,i._)(["\n  position: absolute;\n  .pica-icon-button {\n    display: none;\n    ","\n  }\n  ","\n"]);return p=function(){return e},e}function f(){let e=(0,i._)(["\n    position: relative;\n    width: 17vw;\n    height: 17vw;\n    border-radius: var(--spacing-normal);\n    background: var(--color-colors-bgoverlay);\n    font-size: var(--font-caption-small);\n    ","\n    &.minimize {\n      border-radius: 5vw;\n      width: 10.67vw;\n      height: 10.67vw;\n      border: none;\n      span {\n        display:none\n      }\n    }\n  "]);return f=function(){return e},e}function m(){let e=(0,i._)(["\n      margin-bottom: 0;\n    "]);return m=function(){return e},e}function g(){let e=(0,i._)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  color: var(--color-colors-contentmain);\n  font-size: var(--font-subhead);\n  line-height: var(--font-subhead-H);\n  box-sizing: border-box;\n  width: 128px;\n  height: 128px;\n  border: 1px solid var(--color-colors-bgoverlaytop);\n  border-radius: var(--spacing-medium);\n  cursor: pointer;\n  &.drop {\n    background: var(--color-colors-bgoverlaytop);\n  }\n  .upload-btn {\n    display: none;\n  }\n  ","\n  &:hover {\n    opacity: 0.5;\n  }\n  svg {\n    margin-bottom: var(--spacing-small);\n    ","\n    path {\n      fill: var(--color-colors-contentmain);\n      fill-opacity: 1;\n    }\n  }\n"]);return g=function(){return e},e}function h(){let e=(0,i._)(["\n    display: none;\n  "]);return h=function(){return e},e}function v(){let e=(0,i._)(["\n  ","\n"]);return v=function(){return e},e}function x(){let e=(0,i._)(["\n    display: block;\n  "]);return x=function(){return e},e}function w(){let e=(0,i._)(["\n  display: none;\n  ","\n"]);return w=function(){return e},e}function _(){let e=(0,i._)(["\n    max-height: 100vh;\n    ","\n      &.hide {\n      max-height: 0;\n      .template-item {\n        width: 10.67vw;\n        height: 10.67vw;\n      }\n    }\n    &.horizontal {\n      display: flex;\n      max-height: unset;\n      gap: var(--spacing-small);\n      transform-origin: left;\n      &.hide {\n        transform: scaleX(0);\n        max-height: unset;\n        .template-item {\n          width: 0;\n          opacity: 0;\n        }\n      }\n      .template-item {\n        ","\n        margin-top: 0;\n      }\n    }\n  "]);return _=function(){return e},e}function b(){let e=(0,i._)(["\n  overflow: hidden;\n  ","\n"]);return b=function(){return e},e}function y(){let e=(0,i._)(["\n    ","\n    width: 17vw;\n    height: 17vw;\n    border-radius: var(--spacing-normal);\n  "]);return y=function(){return e},e}function k(){let e=(0,i._)(["\n  width: 128px;\n  height: 128px;\n  border-radius: var(--spacing-medium);\n  box-sizing: border-box;\n  margin-top: var(--spacing-small);\n  overflow: hidden;\n  cursor: pointer;\n  &.active,\n  &:hover {\n    border: 5px solid var(--color-colors-brandmain);\n  }\n  ","\n"]);return k=function(){return e},e}function A(){let e=(0,i._)(["\n  text-align: center;\n  .pica-common-button {\n    width: 280px;\n    height: 55px;\n    margin: 0 auto;\n  }\n"]);return A=function(){return e},e}function C(){let e=(0,i._)(["\n    padding: 0 8px;\n    box-sizing: border-box;\n    margin-bottom: 8px;\n    margin-top: var(--spacing-medium);\n  "]);return C=function(){return e},e}function Z(){let e=(0,i._)(["\n  max-width: 1280px;\n  margin: var(--spacing-large) auto;\n  &.swapping {\n    pointer-events: none;\n  }\n  ","\n"]);return Z=function(){return e},e}function j(){let e=(0,i._)(["\n      display: none;\n    "]);return j=function(){return e},e}function I(){let e=(0,i._)(["\n    width: calc(50% - 16px);\n    margin-bottom: 8px;\n    border-radius: 16px;\n  "]);return I=function(){return e},e}function S(){let e=(0,i._)(["\n  width: calc(25% - 16px);\n  margin-bottom: var(--spacing-normal);\n  border-radius: var(--spacing-medium);\n  overflow: hidden;\n  box-sizing: border-box;\n  cursor: pointer;\n  .pica-common-button {\n    position: absolute;\n    height: auto;\n    width: 70%;\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: var(--spacing-normal);\n    opacity: 0;\n    ","\n  }\n  &:hover {\n    .pica-common-button {\n      opacity: 1;\n      z-index: 1;\n    }\n  }\n  ","\n  .img-shower {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n  img {\n    opacity: 0;\n    width: 100%;\n    height: auto;\n    vertical-align: middle;\n  }\n  video {\n    width: 100%;\n    height: auto;\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n"]);return S=function(){return e},e}function E(){let e=(0,i._)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n"]);return E=function(){return e},e}t(98607);let D=(0,a.iv)(s()),T=a.ZP.div.withConfig({componentId:"sc-a61b0999-0"})(u(),r.BC.mobile(c(),D)),P=a.ZP.div.withConfig({componentId:"sc-a61b0999-1"})(p(),D,r.BC.mobile(d())),R=a.ZP.div.withConfig({componentId:"sc-a61b0999-2"})(g(),r.BC.mobile(f(),D),r.BC.mobile(m())),z=(0,a.ZP)(e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",...e,children:[(0,l.jsx)("path",{fill:"#0A0A0A",d:"M25.333 6.133H6.667a.533.533 0 0 0-.534.534v18.666c0 .295.24.534.534.534h14.666a1.067 1.067 0 0 1 0 2.133H6.667A2.667 2.667 0 0 1 4 25.333V6.667A2.667 2.667 0 0 1 6.667 4h18.666A2.667 2.667 0 0 1 28 6.667V18.4a1.067 1.067 0 0 1-2.134 0V6.667a.533.533 0 0 0-.533-.534"}),(0,l.jsx)("path",{fill:"#0A0A0A",d:"M24.13 17.418a1.067 1.067 0 0 0-1.147-.979c-5.787.459-10.803 2.003-13.405 6.668a1.067 1.067 0 0 0 1.863 1.039c2.051-3.678 6.083-5.134 11.71-5.58a1.067 1.067 0 0 0 .98-1.148M11.333 13.333a2 2 0 1 0 0-4 2 2 0 0 0 0 4M27.867 21.6v1.6h1.6a1.067 1.067 0 0 1 0 2.133h-1.6v1.6a1.067 1.067 0 0 1-2.134 0v-1.6h-1.6a1.067 1.067 0 0 1 0-2.133h1.6v-1.6a1.067 1.067 0 1 1 2.134 0"})]})).withConfig({componentId:"sc-a61b0999-3"})(v(),r.BC.mobile(h())),F=(0,a.ZP)(e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...e,children:[(0,l.jsx)("path",{fill:"#0A0A0A",d:"M19 4.6H5a.4.4 0 0 0-.4.4v14c0 .22.18.4.4.4h11a.8.8 0 0 1 0 1.6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8.8a.8.8 0 0 1-1.6 0V5a.4.4 0 0 0-.4-.4"}),(0,l.jsx)("path",{fill:"#0A0A0A",d:"M18.098 13.064a.8.8 0 0 0-.86-.735c-4.341.344-8.103 1.502-10.054 5.001a.8.8 0 1 0 1.397.78c1.538-2.76 4.562-3.851 8.782-4.186a.8.8 0 0 0 .735-.86M8.5 10a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M20.9 16.2v1.2h1.2a.8.8 0 0 1 0 1.6h-1.2v1.2a.8.8 0 1 1-1.6 0V19h-1.2a.8.8 0 1 1 0-1.6h1.2v-1.2a.8.8 0 0 1 1.6 0"})]})).withConfig({componentId:"sc-a61b0999-4"})(w(),r.BC.mobile(x())),N=a.ZP.div.withConfig({componentId:"sc-a61b0999-5"})(b(),r.BC.mobile(_(),D,D)),U=(0,a.ZP)(o.N).withConfig({componentId:"sc-a61b0999-6"})(k(),r.BC.mobile(y(),D)),B=a.ZP.div.withConfig({componentId:"sc-a61b0999-7"})(A()),M=a.ZP.div.withConfig({componentId:"sc-a61b0999-8"})(Z(),r.BC.mobile(C())),V=a.ZP.div.withConfig({componentId:"sc-a61b0999-9"})(S(),r.BC.mobile(j()),r.BC.mobile(I())),L=(0,a.ZP)(e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:36,height:36,fill:"none",viewBox:"0 0 73 72",...e,children:[(0,l.jsx)("circle",{cx:36.5,cy:36,r:36,fill:"#000",fillOpacity:.7}),(0,l.jsx)("circle",{cx:36.5,cy:36,r:35.5,stroke:"#fff",strokeOpacity:.6}),(0,l.jsx)("path",{fill:"#fff",d:"M47.694 33.451c1.962 1.133 1.962 3.964 0 5.097l-15.448 8.919c-1.962 1.133-4.414-.283-4.414-2.548V27.08c0-2.266 2.452-3.681 4.414-2.549z"})]})).withConfig({componentId:"sc-a61b0999-10"})(E())},15554:function(e,n,t){"use strict";t.d(n,{u:function(){return a}});var i=t(98607);let a=(0,i.createContext)({uiControl:{},refManager:{},tmplManager:{},resultManager:{},reqStatusCollection:{},isFocusToSwap:!1,horizontal:!1,drawerHeight:0,hasBeenInteract:!1,setInteractStauts:e=>{},setFocusToSwap:()=>{},focusTemplatePreview:()=>{},setAdaptDrawerHeight:()=>{},onTemplateLoadEffect:e=>{},isMobileStyle:!1})},12261:function(e,n,t){"use strict";t.d(n,{g:function(){return r}});var i=t(58780),a=t(20033);let r=()=>{a.T.emit(i.i)}},77161:function(e,n,t){"use strict";var i=t(18421);t(98607),n.Z=e=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:25,height:24,fill:"none",...e,children:[(0,i.jsx)("path",{fill:"currentColor",fillOpacity:.5,d:"M13.3 5a.8.8 0 0 0-1.6 0v6.2H5.5a.8.8 0 1 0 0 1.6h6.2V19a.8.8 0 0 0 1.6 0v-6.2h6.2a.8.8 0 0 0 0-1.6h-6.2z"}),(0,i.jsx)("path",{fill:"currentColor",fillOpacity:.2,d:"M13.3 5a.8.8 0 0 0-1.6 0v6.2H5.5a.8.8 0 1 0 0 1.6h6.2V19a.8.8 0 0 0 1.6 0v-6.2h6.2a.8.8 0 0 0 0-1.6h-6.2z"})]})},87096:function(e,n,t){"use strict";var i=t(18421);t(98607),n.Z=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...e,children:(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"m16.5 7.243-1.024 1.025-1.98-1.98 1.025-1.025zm-2.156 2.156-1.98-1.98-6.091 6.092-.029 2.008 2.009-.028zM4.97 12.552l8.845-8.845a1 1 0 0 1 1.414 0l2.828 2.829a1 1 0 0 1 0 1.414l-8.844 8.845a1 1 0 0 1-.693.292l-2.87.04a1 1 0 0 1-1.013-1.013l.04-2.87a1 1 0 0 1 .293-.692M5.3 18.4a.8.8 0 0 0 0 1.6h14.4a.8.8 0 0 0 0-1.6z",clipRule:"evenodd"})})},16611:function(e,n,t){"use strict";var i=t(18421);t(98607),n.Z=e=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...e,children:[(0,i.jsx)("path",{fill:"#fff",d:"M5.5 8.5A.5.5 0 0 1 6 8h.5a.5.5 0 0 1 .5.5v2.719h3V8.5a.5.5 0 0 1 .5-.5h.5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-.5a.5.5 0 0 1-.5-.5v-2.781H7V15.5a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5z"}),(0,i.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M13.5 8a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5H17a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm1 1.5v5H17a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"}),(0,i.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M2 5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm2-.4h16c.22 0 .4.18.4.4v14a.4.4 0 0 1-.4.4H4a.4.4 0 0 1-.4-.4V5c0-.22.18-.4.4-.4",clipRule:"evenodd"})]})},50633:function(){}},function(e){e.O(0,[1517,2815,3887,4471,8410,9012,6542,798,1773,9774,2888,179],function(){return e(e.s=22465)}),_N_E=e.O()}]);